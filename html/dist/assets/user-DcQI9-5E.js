import{_ as $,r as i,m as k,o as U,c as d,a as e,t as a,w as l,v as r,h as w,F as j,b as B,e as C,d as u}from"./index-CaC7F69X.js";const G={class:"user-management-container"},V={class:"text-2xl font-bold mb-4 text-white"},F={key:0,class:"text-center text-white"},J={key:1},L={class:"filter-search-bar flex justify-between mb-4"},O=["placeholder"],S={value:"identifier"},D={value:"firstname"},N={value:"lastname"},I={value:"job"},H={class:"overflow-y-auto max-h-[50vh]"},M={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},P={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},T={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},R={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},q={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},E={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},K={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},Q={class:"bg-gray-700 divide-y divide-gray-600"},z={class:"px-4 py-2"},A={class:"px-4 py-2"},W={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},Z={class:"px-4 py-2"},ee=["onClick"],te={key:2,class:"popup fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},se={class:"popup-content bg-gray-800 text-white p-4 rounded w-1/2"},oe={class:"text-lg font-bold mb-4"},ae={class:"mb-4"},ne={class:"block mb-2"},le={class:"mb-4"},re={class:"block mb-2"},ie={class:"mb-4"},de={class:"block mb-2"},ue={class:"mb-4"},ce={class:"block mb-2"},pe={value:"m"},be={value:"f"},me={class:"mb-4"},he={class:"block mb-2"},ve={class:"mb-4"},ge={class:"block mb-2"},ye={class:"mb-4"},we={class:"block mb-2"},fe={class:"mb-4"},_e={class:"block mb-2"},xe={class:"mt-4"},$e={__name:"user",setup(ke){const h=i(!0),c=i([]),v=i([]),n=i(null),b=i(""),p=i("identifier"),f=async()=>{try{const s=await(await fetch(`https://${GetParentResourceName()}/getUsers`)).json();c.value=s.users,m()}catch(t){console.error("Failed to fetch users:",t)}finally{h.value=!1}},m=()=>{v.value=c.value.filter(t=>{const s=b.value.toLowerCase();return t.identifier.toLowerCase().includes(s)||t.firstname.toLowerCase().includes(s)||t.lastname.toLowerCase().includes(s)||t.job.toLowerCase().includes(s)}).sort((t,s)=>t[p.value].localeCompare(s[p.value]))},_=t=>{n.value={...t,newFirstname:t.firstname,newLastname:t.lastname,newDateOfBirth:t.dateofbirth,newSex:t.sex,newHeight:t.height,newGroup:t.group,newJob:t.job,newJobGrade:t.job_grade}},x=async()=>{try{const s=await(await fetch(`https://${GetParentResourceName()}/editUser`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(n.value)})).json();if(s.success){const o=c.value.findIndex(y=>y.identifier===n.value.identifier);o!==-1&&(c.value[o]={...c.value[o],...n.value,firstname:n.value.newFirstname,lastname:n.value.newLastname,dateofbirth:n.value.newDateOfBirth,sex:n.value.newSex,height:n.value.newHeight,group:n.value.newGroup,job:n.value.newJob,job_grade:n.value.newJobGrade},m()),g()}else console.error("Failed to update user:",s.error)}catch(t){console.error("Failed to save user:",t)}},g=()=>{n.value=null};return k([b,p],m),U(()=>{f()}),(t,s)=>(u(),d("div",G,[e("h2",V,a(t.$t("userManagement")),1),h.value?(u(),d("div",F,a(t.$t("loading"))+"... ",1)):(u(),d("div",J,[e("div",L,[l(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>b.value=o),onInput:m,class:"p-2 w-1/3 rounded bg-gray-700 text-white",placeholder:t.$t("searchByNameIdentifierOrJob")},null,40,O),[[r,b.value]]),l(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>p.value=o),onChange:s[2]||(s[2]=(...o)=>t.sortUsers&&t.sortUsers(...o)),class:"p-2 rounded bg-gray-700 text-white"},[e("option",S,a(t.$t("sortByIdentifier")),1),e("option",D,a(t.$t("sortByFirstname")),1),e("option",N,a(t.$t("sortByLastname")),1),e("option",I,a(t.$t("sortByJob")),1)],544),[[w,p.value]])]),e("div",H,[e("table",M,[e("thead",null,[e("tr",null,[e("th",P,a(t.$t("identifier")),1),e("th",T,a(t.$t("name")),1),e("th",R,a(t.$t("job")),1),e("th",q,a(t.$t("jobGrade")),1),e("th",E,a(t.$t("group")),1),e("th",K,a(t.$t("actions")),1)])]),e("tbody",Q,[(u(!0),d(j,null,B(v.value,o=>(u(),d("tr",{key:o.identifier},[e("td",z,a(o.identifier),1),e("td",A,a(o.firstname)+" "+a(o.lastname),1),e("td",W,a(o.job),1),e("td",X,a(o.job_grade),1),e("td",Y,a(o.group),1),e("td",Z,[e("button",{onClick:y=>_(o),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},a(t.$t("edit")),9,ee)])]))),128))])])])])),n.value?(u(),d("div",te,[e("div",se,[e("h3",oe,a(t.$t("editUser")),1),e("div",ae,[e("label",ne,a(t.$t("firstname")),1),l(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>n.value.newFirstname=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[r,n.value.newFirstname]])]),e("div",le,[e("label",re,a(t.$t("lastname")),1),l(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=o=>n.value.newLastname=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[r,n.value.newLastname]])]),e("div",ie,[e("label",de,a(t.$t("dateOfBirth")),1),l(e("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=o=>n.value.newDateOfBirth=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[r,n.value.newDateOfBirth]])]),e("div",ue,[e("label",ce,a(t.$t("sex")),1),l(e("select",{"onUpdate:modelValue":s[6]||(s[6]=o=>n.value.newSex=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",pe,a(t.$t("male")),1),e("option",be,a(t.$t("female")),1)],512),[[w,n.value.newSex]])]),e("div",me,[e("label",he,a(t.$t("height")),1),l(e("input",{type:"number","onUpdate:modelValue":s[7]||(s[7]=o=>n.value.newHeight=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[r,n.value.newHeight]])]),e("div",ve,[e("label",ge,a(t.$t("group")),1),l(e("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=o=>n.value.newGroup=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[r,n.value.newGroup]])]),e("div",ye,[e("label",we,a(t.$t("job")),1),l(e("input",{type:"text","onUpdate:modelValue":s[9]||(s[9]=o=>n.value.newJob=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[r,n.value.newJob]])]),e("div",fe,[e("label",_e,a(t.$t("jobGrade")),1),l(e("input",{type:"number","onUpdate:modelValue":s[10]||(s[10]=o=>n.value.newJobGrade=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[r,n.value.newJobGrade]])]),e("div",xe,[e("button",{onClick:x,class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},a(t.$t("save")),1),e("button",{onClick:g,class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},a(t.$t("cancel")),1)])])])):C("",!0)]))}},je=$($e,[["__scopeId","data-v-6047d4d2"]]);export{je as default};
