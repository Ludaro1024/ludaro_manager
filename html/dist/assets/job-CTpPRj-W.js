import{_ as v,o as c,c as b,a as e,w as n,v as d,b as k,F as g,r as y,t as h,d as x,e as _,n as C,p as S,f as U,g as j,h as V,i as M}from"./index-BT0Ug1Y0.js";const I={props:["job"]},N=e("label",{class:"block mb-2"},"Job Name",-1),J=e("label",{class:"block mb-2"},"Job Label",-1),G=e("label",{class:"block mb-2"},"Whitelisted",-1);function $(s,t,r,u,l,i){return c(),b("div",null,[e("div",null,[N,n(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>r.job.name=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,r.job.name]])]),e("div",null,[J,n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>r.job.label=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,r.job.label]])]),e("div",null,[G,n(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=o=>r.job.whitelisted=o)},null,512),[[k,r.job.whitelisted]])])])}const z=v(I,[["render",$]]),T={props:["job"],data(){return{showAddGradePopup:!1,newGrade:{grade:"",name:"",label:"",salary:0},error:""}},methods:{addNewGrade(){if(this.job.grades.some(r=>r.name===this.newGrade.name||r.label===this.newGrade.label)){this.error="A grade with the same name or label already exists.";return}Array.isArray(this.job.grades)||(this.job.grades=[]);const t=Math.max(...this.job.grades.map(r=>r.grade),0);this.newGrade.grade=t+1,this.job.grades.push({...this.newGrade}),this.showAddGradePopup=!1,this.newGrade={grade:"",name:"",label:"",salary:0},this.error="",this.$emit("update-job",this.job)},removeGrade(s){this.job.grades.splice(s,1),this.$emit("update-job",this.job)},saveGrades(){fetch(`https://${GetParentResourceName()}/saveGrades`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,grades:this.job.grades})}).then(s=>s.json()).then(s=>{s.success?console.log("Grades saved successfully"):console.error("Failed to save grades")}).catch(s=>{console.error("Error saving grades:",s)})}}},A={class:"overflow-y-auto max-h-[50vh]"},B={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},O=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Grade ID"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Grade Spawn Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Grade Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Salary"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Actions")])],-1),D={class:"bg-gray-700 divide-y divide-gray-600"},R={class:"px-4 py-2"},F={class:"px-4 py-2"},H=["onUpdate:modelValue"],E={class:"px-4 py-2"},L=["onUpdate:modelValue"],W={class:"px-4 py-2"},K=["onUpdate:modelValue"],Y={class:"px-4 py-2"},X=["onClick"],Z={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},q={class:"bg-gray-800 text-white p-4 rounded w-1/2"},Q=e("h3",{class:"text-lg font-bold mb-4"},"Add New Grade",-1),ee={class:"mb-4"},te=e("label",{class:"block mb-2"},"Grade Spawn Name",-1),oe={class:"mb-4"},se=e("label",{class:"block mb-2"},"Grade Name",-1),re={class:"mb-4"},le=e("label",{class:"block mb-2"},"Salary",-1),ne={class:"mt-4"},ae={key:0,class:"text-red-500"};function de(s,t,r,u,l,i){return c(),b("div",A,[e("table",B,[O,e("tbody",D,[(c(!0),b(g,null,y(r.job.grades,(o,p)=>(c(),b("tr",{key:p},[e("td",R,h(o.grade),1),e("td",F,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.name=a,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,H),[[d,o.name]])]),e("td",E,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.label=a,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,L),[[d,o.label]])]),e("td",W,[n(e("input",{type:"number","onUpdate:modelValue":a=>o.salary=a,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,K),[[d,o.salary]])]),e("td",Y,[e("button",{onClick:a=>i.removeGrade(p),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},"Remove",8,X)])]))),128))])]),e("button",{onClick:t[0]||(t[0]=o=>l.showAddGradePopup=!0),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},"Add Grade"),l.showAddGradePopup?(c(),b("div",Z,[e("div",q,[Q,e("div",ee,[te,n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l.newGrade.name=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newGrade.name]])]),e("div",oe,[se,n(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>l.newGrade.label=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newGrade.label]])]),e("div",re,[le,n(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>l.newGrade.salary=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newGrade.salary]])]),e("div",ne,[l.error?(c(),b("span",ae,h(l.error),1)):x("",!0),e("button",{onClick:t[4]||(t[4]=(...o)=>i.addNewGrade&&i.addNewGrade(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"Add Grade"),e("button",{onClick:t[5]||(t[5]=o=>l.showAddGradePopup=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"Cancel")])])])):x("",!0),e("button",{onClick:t[6]||(t[6]=(...o)=>i.saveGrades&&i.saveGrades(...o)),class:"mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"Save Grades")])}const ie=v(T,[["render",de]]),ce={props:["job"],data(){return{localBossMenu:{coords:{x:0,y:0,z:0},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,marker:{markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,bobUpAndDown:!1,faceCamera:!1}}}},beforeMount(){try{console.log(JSON.stringify(this.job));const s=JSON.parse(this.job.ludaro_manager_bossmenu||"{}");this.localBossMenu={coords:s.coords||{x:0,y:0,z:0},grade:s.grade||"",type:s.type||"npc",npcModel:s.npcModel||"",npcHeading:s.npcHeading||0,npcRange:s.npcRange||0,marker:{markerId:s.marker?s.marker.markerId:0,markerColor:s.marker?s.marker.markerColor:{r:0,g:0,b:0},markerScale:s.marker?s.marker.markerScale:1,bobUpAndDown:s.marker?s.marker.bobUpAndDown:!1,faceCamera:s.marker?s.marker.faceCamera:!1}},console.log("Initialized localBossMenu:",JSON.stringify(this.localBossMenu))}catch(s){console.error("Error parsing bossmenu data:",s)}},methods:{fetchCurrentCoords(){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(s=>s.json()).then(s=>{s&&(this.localBossMenu.coords={x:s.x,y:s.y,z:s.z},this.updateJobBossMenu(),console.log("Updated localBossMenu coords:",this.localBossMenu.coords))}).catch(s=>{console.error("Failed to fetch current coords:",s)})},fetchCurrentHeading(){fetch(`https://${GetParentResourceName()}/getCurrentHeading`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(s=>s.json()).then(s=>{s.heading&&(this.localBossMenu.npcHeading=s.heading,this.updateJobBossMenu(),console.log("Updated localBossMenu heading:",this.localBossMenu.npcHeading))}).catch(s=>{console.error("Failed to fetch current heading:",s)})},initializeMarkerColor(){this.localBossMenu.marker.markerColor||(this.localBossMenu.marker.markerColor={r:0,g:0,b:0},this.updateJobBossMenu(),console.log("Initialized marker color to default:",this.localBossMenu.marker.markerColor))},updateJobBossMenu(){this.job.bossmenu={...this.localBossMenu},this.$emit("update-job",this.job)}},watch:{localBossMenu:{handler(){this.updateJobBossMenu()},deep:!0}}},be={class:"mb-4"},ue=e("label",{class:"block mb-2 font-bold"},"Boss Menu Coords (x, y, z)",-1),pe={class:"flex"},he={class:"flex flex-col"},me=e("label",{class:"mb-1"},"X:",-1),ge={class:"flex flex-col"},ye=e("label",{class:"mb-1"},"Y:",-1),xe={class:"flex flex-col"},fe=e("label",{class:"mb-1"},"Z:",-1),we={class:"mb-4"},_e=e("label",{class:"block mb-2 font-bold"},"Boss Menu Grade Access",-1),ve=["value"],ke={class:"mb-4"},je=e("label",{class:"block mb-2 font-bold"},"Boss Menu NPC/Marker",-1),Ce=e("option",{value:"npc"},"NPC",-1),Se=e("option",{value:"marker"},"Marker",-1),Ue=[Ce,Se],Pe={key:0},Ve={class:"flex flex-col"},Me=e("label",{class:"mb-1"},"NPC Model:",-1),Ie={class:"flex flex-col"},Ne=e("label",{class:"mb-1"},"NPC Heading:",-1),Je={class:"flex flex-col"},Ge=e("label",{class:"mb-1"},"NPC Range:",-1),$e={key:1},ze={class:"flex flex-col"},Te=e("label",{class:"mb-1"},"Marker ID:",-1),Ae={class:"flex"},Be={class:"flex flex-col mr-2"},Oe=e("label",{class:"mb-1"},"R:",-1),De={class:"flex flex-col mr-2"},Re=e("label",{class:"mb-1"},"G:",-1),Fe={class:"flex flex-col"},He=e("label",{class:"mb-1"},"B:",-1),Ee={class:"flex flex-col"},Le=e("label",{class:"mb-1"},"Marker Scale:",-1),We={class:"flex flex-col"},Ke=e("label",{class:"mb-1"},"Bob Up and Down:",-1),Ye={class:"flex flex-col"},Xe=e("label",{class:"mb-1"},"Face Camera:",-1);function Ze(s,t,r,u,l,i){return c(),b("div",null,[e("div",be,[ue,e("div",pe,[e("div",he,[me,n(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=o=>l.localBossMenu.coords.x=o),class:"w-full p-2 mr-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[d,l.localBossMenu.coords.x]])]),e("div",ge,[ye,n(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>l.localBossMenu.coords.y=o),class:"w-full p-2 mr-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[d,l.localBossMenu.coords.y]])]),e("div",xe,[fe,n(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>l.localBossMenu.coords.z=o),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[d,l.localBossMenu.coords.z]])])]),e("button",{onClick:t[3]||(t[3]=(...o)=>i.fetchCurrentCoords&&i.fetchCurrentCoords(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords")]),e("div",we,[_e,n(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.localBossMenu.grade=o),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},[(c(!0),b(g,null,y(r.job.grades,o=>(c(),b("option",{key:o.grade,value:o.grade},h(o.label)+" (ID: "+h(o.grade)+") ",9,ve))),128))],512),[[_,l.localBossMenu.grade]])]),e("div",ke,[je,n(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.localBossMenu.type=o),onChange:t[6]||(t[6]=(...o)=>i.initializeMarkerColor&&i.initializeMarkerColor(...o)),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},Ue,544),[[_,l.localBossMenu.type]]),l.localBossMenu.type==="npc"?(c(),b("div",Pe,[e("div",Ve,[Me,n(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>l.localBossMenu.npcModel=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[d,l.localBossMenu.npcModel]])]),e("div",Ie,[Ne,n(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=o=>l.localBossMenu.npcHeading=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[d,l.localBossMenu.npcHeading]])]),e("div",Je,[Ge,n(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=o=>l.localBossMenu.npcRange=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Range"},null,512),[[d,l.localBossMenu.npcRange]])]),e("button",{onClick:t[10]||(t[10]=(...o)=>i.fetchCurrentHeading&&i.fetchCurrentHeading(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Heading")])):l.localBossMenu.type==="marker"?(c(),b("div",$e,[e("div",ze,[Te,n(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=o=>l.localBossMenu.marker.markerId=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[d,l.localBossMenu.marker.markerId]])]),e("div",Ae,[e("div",Be,[Oe,n(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=o=>l.localBossMenu.marker.markerColor.r=o),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[d,l.localBossMenu.marker.markerColor.r]])]),e("div",De,[Re,n(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=o=>l.localBossMenu.marker.markerColor.g=o),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[d,l.localBossMenu.marker.markerColor.g]])]),e("div",Fe,[He,n(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=o=>l.localBossMenu.marker.markerColor.b=o),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[d,l.localBossMenu.marker.markerColor.b]])])]),e("div",Ee,[Le,n(e("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=o=>l.localBossMenu.marker.markerScale=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[d,l.localBossMenu.marker.markerScale]])]),e("div",We,[Ke,n(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>l.localBossMenu.marker.bobUpAndDown=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[k,l.localBossMenu.marker.bobUpAndDown]])]),e("div",Ye,[Xe,n(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=o=>l.localBossMenu.marker.faceCamera=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[k,l.localBossMenu.marker.faceCamera]])])])):x("",!0)])])}const qe=v(ce,[["render",Ze]]),Qe={props:["job"],data(){return{newInteraction:"",availableInteractions:[],error:""}},mounted(){this.fetchAvailableInteractions(),this.job.interactions=JSON.parse(this.job.ludaro_manager_interactions||"[]")},methods:{async fetchAvailableInteractions(){try{const s=await fetch(`https://${GetParentResourceName()}/getInteractions`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})});this.availableInteractions=await s.json(),console.log("Fetched interactions:",this.availableInteractions)}catch(s){console.error("Failed to fetch available interactions:",s),this.error="Failed to load interactions. Please try again later."}},async addInteraction(){if(!this.newInteraction){this.error="Please select a valid interaction.";return}this.error="",Array.isArray(this.job.interactions)||(this.job.interactions=[]);try{const t=await(await fetch(`https://${GetParentResourceName()}/addInteraction`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,interaction:this.newInteraction})})).json();console.log("Interaction add status:",t.success),t.success===!0||t.success==="true"||t.success===void 0?(this.job.interactions.push(this.newInteraction),this.newInteraction="",this.$emit("update-job",this.job)):this.error="Failed to add interaction. Please try again."}catch(s){console.error("Failed to add interaction:",s),this.error="Failed to add interaction. Please try again."}},async removeInteraction(s){const t=this.job.interactions[s];try{const u=await(await fetch(`https://${GetParentResourceName()}/removeInteraction`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,interaction:t})})).json();console.log("Interaction remove status:",u.success),u.success===!0||u.success==="true"||u.success===void 0?(this.job.interactions.splice(s,1),this.$emit("update-job",this.job)):this.error="Failed to remove interaction. Please try again."}catch(r){console.error("Failed to remove interaction:",r),this.error="Failed to remove interaction. Please try again."}}}},et={class:"overflow-y-auto max-h-[50vh]"},tt={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},ot=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Interaction"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Actions")])],-1),st={class:"bg-gray-700 divide-y divide-gray-600"},rt={class:"px-4 py-2"},lt={class:"px-4 py-2"},nt=["onClick"],at={class:"mt-4"},dt=e("label",{class:"block mb-2"},"Select Interaction",-1),it=e("option",{disabled:"",value:""},"-- Select an Interaction --",-1),ct=["value"],bt={key:0,class:"text-red-500"};function ut(s,t,r,u,l,i){return c(),b("div",et,[e("table",tt,[ot,e("tbody",st,[(c(!0),b(g,null,y(r.job.interactions||[],(o,p)=>(c(),b("tr",{key:p},[e("td",rt,h(o),1),e("td",lt,[e("button",{onClick:a=>i.removeInteraction(p),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},"Remove",8,nt)])]))),128))])]),e("div",at,[dt,n(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.newInteraction=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},[it,(c(!0),b(g,null,y(l.availableInteractions,o=>(c(),b("option",{key:o.interaction_name,value:o.interaction_name},h(o.interaction_name),9,ct))),128))],512),[[_,l.newInteraction]]),l.error?(c(),b("span",bt,h(l.error),1)):x("",!0),e("button",{onClick:t[1]||(t[1]=(...o)=>i.addInteraction&&i.addInteraction(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Add Interaction")])])}const pt=v(Qe,[["render",ut]]),ht={props:["job"],data(){return{activeTab:"garage"}},beforeMount(){const s=JSON.parse(this.job.ludaro_manager_garage||"{}");this.job.garage={coords:s.coords||{x:0,y:0,z:0},shop:s.shop||{type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1}};const t=JSON.parse(this.job.ludaro_manager_vehicleShop||"{}");this.job.vehicleShop={coords:t.coords||{x:0,y:0,z:0},type:t.type||"npc",npcModel:t.npcModel||"",npcHeading:t.npcHeading||0,markerId:t.markerId||0,markerColor:t.markerColor||{r:0,g:0,b:0},markerScale:t.markerScale||1,vehicles:t.vehicles||[],buyWithSocietyMoney:t.buyWithSocietyMoney||!1},console.log("Loaded garage data:",JSON.stringify(this.job.garage)),console.log("Loaded vehicle shop data:",JSON.stringify(this.job.vehicleShop))},methods:{fetchCurrentCoords(s){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(t=>t.json()).then(t=>{t&&(s==="garage"?this.job.garage.coords={x:t.x,y:t.y,z:t.z}:this.job.vehicleShop.coords={x:t.x,y:t.y,z:t.z},this.$emit("update-job",this.job))}).catch(t=>{console.error("Failed to fetch current coords:",t)})},fetchCurrentHeading(s){fetch(`https://${GetParentResourceName()}/getCurrentHeading`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(t=>t.json()).then(t=>{t&&(s==="vehicleShop"?this.job.vehicleShop.npcHeading=t:this.job.garage.shop.npcHeading=t,this.$emit("update-job",this.job))}).catch(t=>{console.error("Failed to fetch current heading:",t)})},initializeMarkerColor(s){s==="vehicleShop"?this.job.vehicleShop.markerColor||(this.job.vehicleShop.markerColor={r:0,g:0,b:0}):this.job.garage.shop.markerColor||(this.job.garage.shop.markerColor={r:0,g:0,b:0})},addVehicle(){this.job.vehicleShop.vehicles.push({model:"",label:"",price:0,grade:"",platePrefix:"",societyOwned:!1}),this.$emit("update-job",this.job)},removeVehicle(s){this.job.vehicleShop.vehicles.splice(s,1),this.$emit("update-job",this.job)}}},m=s=>(S("data-v-a1b3153e"),s=s(),U(),s),mt={class:"tabs"},gt={key:0},yt=m(()=>e("label",{class:"block mb-2"},"Garage Coords (x, y, z)",-1)),xt={class:"mt-4"},ft=m(()=>e("label",{class:"block mb-2"},"Garage Marker/NPC",-1)),wt=m(()=>e("option",{value:"npc"},"NPC",-1)),_t=m(()=>e("option",{value:"marker"},"Marker",-1)),vt=[wt,_t],kt={key:0},jt=m(()=>e("label",{class:"block mb-2"},"NPC Model",-1)),Ct=m(()=>e("label",{class:"block mb-2"},"NPC Heading",-1)),St={key:1},Ut=m(()=>e("label",{class:"block mb-2"},"Marker ID",-1)),Pt=m(()=>e("label",{class:"block mb-2"},"Marker Color (RGB)",-1)),Vt=m(()=>e("label",{class:"block mb-2"},"Marker Scale",-1)),Mt={key:1},It=m(()=>e("label",{class:"block mb-2"},"Vehicle Shop Coords (x, y, z)",-1)),Nt={class:"mt-4"},Jt=m(()=>e("label",{class:"block mb-2"},"Vehicle Shop Marker/NPC",-1)),Gt=m(()=>e("option",{value:"npc"},"NPC",-1)),$t=m(()=>e("option",{value:"marker"},"Marker",-1)),zt=[Gt,$t],Tt={key:0},At=m(()=>e("label",{class:"block mb-2"},"NPC Model",-1)),Bt=m(()=>e("label",{class:"block mb-2"},"NPC Heading",-1)),Ot={key:1},Dt=m(()=>e("label",{class:"block mb-2"},"Marker ID",-1)),Rt=m(()=>e("label",{class:"block mb-2"},"Marker Color (RGB)",-1)),Ft=m(()=>e("label",{class:"block mb-2"},"Marker Scale",-1)),Ht={class:"mt-4"},Et=m(()=>e("label",{class:"block mb-2"},"Buy with Society Money",-1)),Lt={class:"mt-4"},Wt=m(()=>e("h3",{class:"text-lg font-bold mb-2"},"Available Vehicles",-1)),Kt={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},Yt=m(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Model"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Label"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Price"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Grade"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Plate Prefix"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Society Owned"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Actions")])],-1)),Xt={class:"bg-gray-700 divide-y divide-gray-600"},Zt={class:"px-4 py-2"},qt=["onUpdate:modelValue"],Qt={class:"px-4 py-2"},eo=["onUpdate:modelValue"],to={class:"px-4 py-2"},oo=["onUpdate:modelValue"],so={class:"px-4 py-2"},ro=["onUpdate:modelValue"],lo=["value"],no={class:"px-4 py-2"},ao=["onUpdate:modelValue"],io={class:"px-4 py-2"},co=["onUpdate:modelValue"],bo={class:"px-4 py-2"},uo=["onClick"];function po(s,t,r,u,l,i){return c(),b("div",null,[e("div",mt,[e("button",{class:C([{"active-tab":l.activeTab==="garage"},"tab-button"]),onClick:t[0]||(t[0]=o=>l.activeTab="garage")}," Garage ",2),e("button",{class:C([{"active-tab":l.activeTab==="vehicleShop"},"tab-button"]),onClick:t[1]||(t[1]=o=>l.activeTab="vehicleShop")}," Vehicle Shop ",2)]),l.activeTab==="garage"?(c(),b("div",gt,[e("div",null,[yt,n(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>r.job.garage.coords.x=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[d,r.job.garage.coords.x]]),n(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>r.job.garage.coords.y=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[d,r.job.garage.coords.y]]),n(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>r.job.garage.coords.z=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[d,r.job.garage.coords.z]]),e("button",{onClick:t[5]||(t[5]=o=>i.fetchCurrentCoords("garage")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords")]),e("div",xt,[ft,n(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>r.job.garage.shop.type=o),onChange:t[7]||(t[7]=o=>i.initializeMarkerColor("garage")),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},vt,544),[[_,r.job.garage.shop.type]]),r.job.garage.shop.type==="npc"?(c(),b("div",kt,[jt,n(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>r.job.garage.shop.npcModel=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[d,r.job.garage.shop.npcModel]]),Ct,n(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=o=>r.job.garage.shop.npcHeading=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[d,r.job.garage.shop.npcHeading]]),e("button",{onClick:t[10]||(t[10]=o=>i.fetchCurrentHeading("garage")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Heading")])):r.job.garage.shop.type==="marker"?(c(),b("div",St,[Ut,n(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=o=>r.job.garage.shop.markerId=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[d,r.job.garage.shop.markerId]]),e("div",null,[Pt,n(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=o=>r.job.garage.shop.markerColor.r=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[d,r.job.garage.shop.markerColor.r]]),n(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=o=>r.job.garage.shop.markerColor.g=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[d,r.job.garage.shop.markerColor.g]]),n(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=o=>r.job.garage.shop.markerColor.b=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[d,r.job.garage.shop.markerColor.b]])]),Vt,n(e("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=o=>r.job.garage.shop.markerScale=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[d,r.job.garage.shop.markerScale]])])):x("",!0)])])):l.activeTab==="vehicleShop"?(c(),b("div",Mt,[e("div",null,[It,n(e("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=o=>r.job.vehicleShop.coords.x=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[d,r.job.vehicleShop.coords.x]]),n(e("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=o=>r.job.vehicleShop.coords.y=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[d,r.job.vehicleShop.coords.y]]),n(e("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=o=>r.job.vehicleShop.coords.z=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[d,r.job.vehicleShop.coords.z]]),e("button",{onClick:t[19]||(t[19]=o=>i.fetchCurrentCoords("vehicleShop")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords")]),e("div",Nt,[Jt,n(e("select",{"onUpdate:modelValue":t[20]||(t[20]=o=>r.job.vehicleShop.type=o),onChange:t[21]||(t[21]=o=>i.initializeMarkerColor("vehicleShop")),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},zt,544),[[_,r.job.vehicleShop.type]]),r.job.vehicleShop.type==="npc"?(c(),b("div",Tt,[At,n(e("input",{type:"text","onUpdate:modelValue":t[22]||(t[22]=o=>r.job.vehicleShop.npcModel=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[d,r.job.vehicleShop.npcModel]]),Bt,n(e("input",{type:"number","onUpdate:modelValue":t[23]||(t[23]=o=>r.job.vehicleShop.npcHeading=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[d,r.job.vehicleShop.npcHeading]]),e("button",{onClick:t[24]||(t[24]=o=>i.fetchCurrentHeading("vehicleShop")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Heading")])):r.job.vehicleShop.type==="marker"?(c(),b("div",Ot,[Dt,n(e("input",{type:"number","onUpdate:modelValue":t[25]||(t[25]=o=>r.job.vehicleShop.markerId=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[d,r.job.vehicleShop.markerId]]),e("div",null,[Rt,n(e("input",{type:"number","onUpdate:modelValue":t[26]||(t[26]=o=>r.job.vehicleShop.markerColor.r=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[d,r.job.vehicleShop.markerColor.r]]),n(e("input",{type:"number","onUpdate:modelValue":t[27]||(t[27]=o=>r.job.vehicleShop.markerColor.g=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[d,r.job.vehicleShop.markerColor.g]]),n(e("input",{type:"number","onUpdate:modelValue":t[28]||(t[28]=o=>r.job.vehicleShop.markerColor.b=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[d,r.job.vehicleShop.markerColor.b]])]),Ft,n(e("input",{type:"number","onUpdate:modelValue":t[29]||(t[29]=o=>r.job.vehicleShop.markerScale=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[d,r.job.vehicleShop.markerScale]])])):x("",!0)]),e("div",Ht,[Et,n(e("input",{type:"checkbox","onUpdate:modelValue":t[30]||(t[30]=o=>r.job.vehicleShop.buyWithSocietyMoney=o)},null,512),[[k,r.job.vehicleShop.buyWithSocietyMoney]])]),e("div",Lt,[Wt,e("table",Kt,[Yt,e("tbody",Xt,[(c(!0),b(g,null,y(r.job.vehicleShop.vehicles,(o,p)=>(c(),b("tr",{key:p},[e("td",Zt,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.model=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Model"},null,8,qt),[[d,o.model]])]),e("td",Qt,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.label=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Label"},null,8,eo),[[d,o.label]])]),e("td",to,[n(e("input",{type:"number","onUpdate:modelValue":a=>o.price=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Price"},null,8,oo),[[d,o.price]])]),e("td",so,[n(e("select",{"onUpdate:modelValue":a=>o.grade=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[(c(!0),b(g,null,y(r.job.grades,a=>(c(),b("option",{key:a.grade,value:a.grade},h(a.label)+" (ID: "+h(a.grade)+") ",9,lo))),128))],8,ro),[[_,o.grade]])]),e("td",no,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.platePrefix=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Plate Prefix"},null,8,ao),[[d,o.platePrefix]])]),e("td",io,[n(e("input",{type:"checkbox","onUpdate:modelValue":a=>o.societyOwned=a},null,8,co),[[k,o.societyOwned]])]),e("td",bo,[e("button",{onClick:a=>i.removeVehicle(p),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},"Remove",8,uo)])]))),128))])]),e("button",{onClick:t[31]||(t[31]=(...o)=>i.addVehicle&&i.addVehicle(...o)),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},"Add Vehicle")])])):x("",!0)])}const ho=v(ht,[["render",po],["__scopeId","data-v-a1b3153e"]]),mo={props:["job"],beforeMount(){try{const s=JSON.parse(this.job.ludaro_manager_onoffduty||"{}");this.job.onoffduty={coords:s.coords||{x:0,y:0,z:0},type:s.type||"npc",npcModel:s.npcModel||"",npcHeading:s.npcHeading||0,npcRange:s.npcRange||0,markerId:s.markerId||0,markerColor:s.markerColor||{r:0,g:0,b:0},markerScale:s.markerScale||1},console.log("Initialized job.onoffduty:",JSON.stringify(this.job.onoffduty))}catch(s){console.error("Error parsing onoffduty data:",s),this.job.onoffduty={coords:{x:0,y:0,z:0},type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1}}},methods:{fetchCurrentCoords(){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(s=>s.json()).then(s=>{s&&(this.job.onoffduty.coords={x:s.x,y:s.y,z:s.z},this.$emit("update-job",this.job),console.log("Updated onoffduty coords:",this.job.onoffduty.coords))}).catch(s=>{console.error("Failed to fetch current coords:",s)})},initializeMarkerColor(){this.job.onoffduty.markerColor||(this.job.onoffduty.markerColor={r:0,g:0,b:0},console.log("Initialized marker color to default:",this.job.onoffduty.markerColor))}},watch:{job:{handler(s){this.$emit("update-job",s)},deep:!0}}},go=e("label",{class:"block mb-2"},"On/Off Duty Coords (x, y, z)",-1),yo={class:"mb-4"},xo=e("label",{class:"block mb-2"},"On/Off Duty NPC/Marker",-1),fo=e("option",{value:"npc"},"NPC",-1),wo=e("option",{value:"marker"},"Marker",-1),_o=[fo,wo],vo={key:0},ko={key:1},jo=e("label",{class:"block mb-2"},"Marker Color (RGB)",-1);function Co(s,t,r,u,l,i){return c(),b("div",null,[e("div",null,[go,n(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=o=>r.job.onoffduty.coords.x=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[d,r.job.onoffduty.coords.x]]),n(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>r.job.onoffduty.coords.y=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[d,r.job.onoffduty.coords.y]]),n(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>r.job.onoffduty.coords.z=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[d,r.job.onoffduty.coords.z]]),e("button",{onClick:t[3]||(t[3]=(...o)=>i.fetchCurrentCoords&&i.fetchCurrentCoords(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords")]),e("div",yo,[xo,n(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>r.job.onoffduty.type=o),onChange:t[5]||(t[5]=(...o)=>i.initializeMarkerColor&&i.initializeMarkerColor(...o)),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},_o,544),[[_,r.job.onoffduty.type]]),r.job.onoffduty.type==="npc"?(c(),b("div",vo,[n(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>r.job.onoffduty.npcModel=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[d,r.job.onoffduty.npcModel]]),n(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=o=>r.job.onoffduty.npcHeading=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[d,r.job.onoffduty.npcHeading]]),n(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=o=>r.job.onoffduty.npcRange=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Range"},null,512),[[d,r.job.onoffduty.npcRange]])])):r.job.onoffduty.type==="marker"?(c(),b("div",ko,[n(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=o=>r.job.onoffduty.markerId=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[d,r.job.onoffduty.markerId]]),e("div",null,[jo,n(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=o=>r.job.onoffduty.markerColor.r=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[d,r.job.onoffduty.markerColor.r]]),n(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=o=>r.job.onoffduty.markerColor.g=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[d,r.job.onoffduty.markerColor.g]]),n(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=o=>r.job.onoffduty.markerColor.b=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[d,r.job.onoffduty.markerColor.b]])]),n(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=o=>r.job.onoffduty.markerScale=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[d,r.job.onoffduty.markerScale]])])):x("",!0)])])}const So=v(mo,[["render",Co]]),Uo={props:["job"],methods:{getGradeLabel(s){const t=this.job.grades.find(r=>r.grade===s);return t?`${t.label} (ID: ${t.grade})`:"Unknown"},promoteEmployee(s){const t=this.job.employees.find(u=>u.identifier===s),r=this.job.grades.findIndex(u=>u.grade===t.job_grade);r<this.job.grades.length-1&&(t.job_grade=this.job.grades[r+1].grade,this.saveEmployeeData(t))},demoteEmployee(s){const t=this.job.employees.find(u=>u.identifier===s),r=this.job.grades.findIndex(u=>u.grade===t.job_grade);r>0&&(t.job_grade=this.job.grades[r-1].grade,this.saveEmployeeData(t))},fireEmployee(s){const t=this.job.employees.find(r=>r.identifier===s);this.job.employees=this.job.employees.filter(r=>r.identifier!==s),this.$emit("update-job",this.job),fetch(`https://${GetParentResourceName()}/saveEmployee`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,employee:t,fire:!0})})},saveEmployeeData(s){fetch(`https://${GetParentResourceName()}/saveEmployee`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,employee:s})}).then(t=>t.json()).then(t=>{t.success&&this.$emit("update-job",this.job)}).catch(t=>{console.error("Failed to save employee data:",t)})},canPromote(s){const t=this.job.grades.findIndex(r=>r.grade===s.job_grade);return t<this.job.grades.length-1&&this.job.grades[t+1]},canDemote(s){const t=this.job.grades.findIndex(r=>r.grade===s.job_grade);return t>0&&this.job.grades[t-1]}}},Po=s=>(S("data-v-5c7ff4a0"),s=s(),U(),s),Vo={class:"overflow-y-auto max-h-[50vh]"},Mo={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},Io=Po(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"First Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Last Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Grade"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Actions")])],-1)),No={class:"bg-gray-700 divide-y divide-gray-600"},Jo={class:"px-4 py-2"},Go={class:"px-4 py-2"},$o={class:"px-4 py-2"},zo={class:"px-4 py-2"},To=["onClick"],Ao=["onClick"],Bo=["onClick"];function Oo(s,t,r,u,l,i){return c(),b("div",Vo,[e("table",Mo,[Io,e("tbody",No,[(c(!0),b(g,null,y(r.job.employees,(o,p)=>(c(),b("tr",{key:o.identifier},[e("td",Jo,h(o.firstname),1),e("td",Go,h(o.lastname),1),e("td",$o,h(i.getGradeLabel(o.job_grade)),1),e("td",zo,[i.canPromote(o)?(c(),b("button",{key:0,onClick:a=>i.promoteEmployee(o.identifier),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"Promote",8,To)):x("",!0),i.canDemote(o)?(c(),b("button",{key:1,onClick:a=>i.demoteEmployee(o.identifier),class:"bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600"},"Demote",8,Ao)):x("",!0),r.job.name!=="unemployed"?(c(),b("button",{key:2,onClick:a=>i.fireEmployee(o.identifier),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Fire",8,Bo)):x("",!0)])]))),128))])])])}const Do=v(Uo,[["render",Oo],["__scopeId","data-v-5c7ff4a0"]]),Ro={},Fo={class:"under-construction"},Ho=e("div",{class:"message"},[e("span",{class:"text"},"🚧 Under Construction 👷‍♀️🚧"),e("br"),e("span",{class:"text"},"This site is not available right now.")],-1),Eo=[Ho];function Lo(s,t){return c(),b("div",Fo,Eo)}const Wo=v(Ro,[["render",Lo]]),Ko={props:["job"],data(){return{showAddShopPopup:!1,newShop:{coords:{x:0,y:0,z:0},name:"",items:[]}}},beforeMount(){this.job.shops=JSON.parse(this.job.ludaro_manager_shops||"[]"),this.job.shops||(this.job.shops=[]),this.job.shops=this.job.shops.map(s=>({coords:s.coords||{x:0,y:0,z:0},name:s.name||"",items:s.items?s.items.map(t=>({name:t.name||"",price:t.price||0,stock:t.stock||0,minimumGrade:t.minimumGrade||""})):[]})),console.log("Loaded job data:",JSON.stringify(this.job.shops))},methods:{fetchCurrentCoords(s=null,t=!1){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(r=>r.json()).then(r=>{r&&(t?this.newShop.coords={x:r.x,y:r.y,z:r.z}:this.job.shops[s].coords={x:r.x,y:r.y,z:r.z},console.log("Updated coords:",r),this.$emit("update-job",this.job))}).catch(r=>{console.error("Failed to fetch current coords:",r)})},addItem(s){this.job.shops[s].items||(this.job.shops[s].items=[]),this.job.shops[s].items.push({name:"",price:0,stock:0,minimumGrade:""}),console.log("Added new item to shop:",s,this.job.shops[s].items),this.$emit("update-job",this.job)},removeItem(s,t){this.job.shops[s].items.splice(t,1),console.log("Removed item from shop:",s,this.job.shops[s].items),this.$emit("update-job",this.job)},addNewItem(){this.newShop.items.push({name:"",price:0,stock:0,minimumGrade:""}),console.log("Added new item to new shop:",this.newShop.items)},removeNewItem(s){this.newShop.items.splice(s,1),console.log("Removed item from new shop:",s,this.newShop.items)},addNewShop(){Array.isArray(this.job.shops)||(this.job.shops=[]),this.job.shops.push({...this.newShop}),console.log("Added new shop:",this.newShop),this.showAddShopPopup=!1,this.newShop={coords:{x:0,y:0,z:0},name:"",items:[]},this.$emit("update-job",this.job)},removeShop(s){this.job.shops.splice(s,1),console.log("Removed shop:",s,this.job.shops),this.$emit("update-job",this.job)}}},Yo={class:"overflow-y-auto max-h-[50vh]"},Xo={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},Zo=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Coords"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Items"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Actions")])],-1),qo={class:"bg-gray-700 divide-y divide-gray-600"},Qo={class:"px-4 py-2"},es=["onUpdate:modelValue"],ts=["onUpdate:modelValue"],os=["onUpdate:modelValue"],ss=["onClick"],rs={class:"px-4 py-2"},ls=["onUpdate:modelValue"],ns={class:"px-4 py-2"},as=["onUpdate:modelValue"],ds={class:"flex space-x-2"},is={class:"w-1/3"},cs=e("label",{class:"block mb-2"},"Price",-1),bs=["onUpdate:modelValue"],us={class:"w-1/3"},ps=e("label",{class:"block mb-2"},"Stock",-1),hs=["onUpdate:modelValue"],ms={class:"w-1/3"},gs=e("label",{class:"block mb-2"},"Grade",-1),ys=["onUpdate:modelValue"],xs=["value"],fs=["onClick"],ws=["onClick"],_s={class:"px-4 py-2"},vs=["onClick"],ks={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},js={class:"bg-gray-800 text-white p-4 rounded w-1/2 overflow-auto max-h-[90vh]"},Cs=e("h3",{class:"text-lg font-bold mb-4"},"Add New Shop",-1),Ss={class:"mb-4"},Us=e("label",{class:"block mb-2"},"Coords",-1),Ps={class:"mb-4"},Vs=e("label",{class:"block mb-2"},"Name",-1),Ms={class:"mb-4"},Is=e("label",{class:"block mb-2"},"Items",-1),Ns=["onUpdate:modelValue"],Js={class:"flex space-x-2"},Gs={class:"w-1/3"},$s=e("label",{class:"block mb-2"},"Price",-1),zs=["onUpdate:modelValue"],Ts={class:"w-1/3"},As=e("label",{class:"block mb-2"},"Stock",-1),Bs=["onUpdate:modelValue"],Os={class:"w-1/3"},Ds=e("label",{class:"block mb-2"},"Grade",-1),Rs=["onUpdate:modelValue"],Fs=["value"],Hs=["onClick"],Es={class:"mt-4"};function Ls(s,t,r,u,l,i){return c(),b("div",Yo,[e("table",Xo,[Zo,e("tbody",qo,[(c(!0),b(g,null,y(r.job.shops,(o,p)=>(c(),b("tr",{key:p},[e("td",Qo,[n(e("input",{type:"number","onUpdate:modelValue":a=>o.coords.x=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,8,es),[[d,o.coords.x]]),n(e("input",{type:"number","onUpdate:modelValue":a=>o.coords.y=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,8,ts),[[d,o.coords.y]]),n(e("input",{type:"number","onUpdate:modelValue":a=>o.coords.z=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,8,os),[[d,o.coords.z]]),e("button",{onClick:a=>i.fetchCurrentCoords(p),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords",8,ss)]),e("td",rs,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.name=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Shop Name"},null,8,ls),[[d,o.name]])]),e("td",ns,[(c(!0),b(g,null,y(o.items,(a,P)=>(c(),b("div",{key:P,class:"mb-4"},[n(e("input",{type:"text","onUpdate:modelValue":f=>a.name=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Item Name"},null,8,as),[[d,a.name]]),e("div",ds,[e("div",is,[cs,n(e("input",{type:"number","onUpdate:modelValue":f=>a.price=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Price"},null,8,bs),[[d,a.price]])]),e("div",us,[ps,n(e("input",{type:"number","onUpdate:modelValue":f=>a.stock=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Stock"},null,8,hs),[[d,a.stock]])]),e("div",ms,[gs,n(e("select",{"onUpdate:modelValue":f=>a.minimumGrade=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[(c(!0),b(g,null,y(r.job.grades,f=>(c(),b("option",{key:f.grade,value:f.grade},h(f.label)+" (ID: "+h(f.grade)+") ",9,xs))),128))],8,ys),[[_,a.minimumGrade]])])]),e("button",{onClick:f=>i.removeItem(p,P),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Remove Item",8,fs)]))),128)),e("button",{onClick:a=>i.addItem(p),class:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600"},"Add Item",8,ws)]),e("td",_s,[e("button",{onClick:a=>i.removeShop(p),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},"Remove Shop",8,vs)])]))),128))])]),e("button",{onClick:t[0]||(t[0]=o=>l.showAddShopPopup=!0),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},"Add Shop"),l.showAddShopPopup?(c(),b("div",ks,[e("div",js,[Cs,e("div",Ss,[Us,n(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>l.newShop.coords.x=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[d,l.newShop.coords.x]]),n(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>l.newShop.coords.y=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[d,l.newShop.coords.y]]),n(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>l.newShop.coords.z=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[d,l.newShop.coords.z]]),e("button",{onClick:t[4]||(t[4]=o=>i.fetchCurrentCoords(null,!0)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords")]),e("div",Ps,[Vs,n(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>l.newShop.name=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Shop Name"},null,512),[[d,l.newShop.name]])]),e("div",Ms,[Is,(c(!0),b(g,null,y(l.newShop.items,(o,p)=>(c(),b("div",{key:p,class:"mb-4"},[n(e("input",{type:"text","onUpdate:modelValue":a=>o.name=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Item Name"},null,8,Ns),[[d,o.name]]),e("div",Js,[e("div",Gs,[$s,n(e("input",{type:"number","onUpdate:modelValue":a=>o.price=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Price"},null,8,zs),[[d,o.price]])]),e("div",Ts,[As,n(e("input",{type:"number","onUpdate:modelValue":a=>o.stock=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Stock"},null,8,Bs),[[d,o.stock]])]),e("div",Os,[Ds,n(e("select",{"onUpdate:modelValue":a=>o.minimumGrade=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[(c(!0),b(g,null,y(r.job.grades,a=>(c(),b("option",{key:a.grade,value:a.grade},h(a.label)+" (ID: "+h(a.grade)+") ",9,Fs))),128))],8,Rs),[[_,o.minimumGrade]])])]),e("button",{onClick:a=>i.removeNewItem(p),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Remove Item",8,Hs)]))),128)),e("button",{onClick:t[6]||(t[6]=(...o)=>i.addNewItem&&i.addNewItem(...o)),class:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600"},"Add Item")]),e("div",Es,[e("button",{onClick:t[7]||(t[7]=(...o)=>i.addNewShop&&i.addNewShop(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"Add Shop"),e("button",{onClick:t[8]||(t[8]=o=>l.showAddShopPopup=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"Cancel")])])])):x("",!0)])}const Ws=v(Ko,[["render",Ls]]),Ks={props:["job"],data(){return{showAddProcessingPopup:!1,newProcessing:{inputItems:"",outputItem:"",seconds:0,animationDir:"",animation:"",minimumGrade:"",coords:{x:null,y:null,z:null}}}},methods:{fetchCurrentCoords(s=null,t=!1){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(r=>r.json()).then(r=>{if(r){const u={x:r.x||0,y:r.y||0,z:r.z||0};t?this.newProcessing.coords=u:this.job.ludaro_manager_processing[s]&&(this.job.ludaro_manager_processing[s].coords=u),this.$emit("update-job",this.job)}}).catch(r=>{console.error("Failed to fetch current coords:",r)})},addNewProcessing(){Array.isArray(this.job.ludaro_manager_processing)||(this.job.ludaro_manager_processing=[]),this.job.ludaro_manager_processing.push({...this.newProcessing}),this.showAddProcessingPopup=!1,this.newProcessing={inputItems:"",outputItem:"",seconds:0,animationDir:"",animation:"",minimumGrade:"",coords:{x:null,y:null,z:null}},this.$emit("update-job",this.job)},removeProcessing(s){this.job.ludaro_manager_processing&&this.job.ludaro_manager_processing[s]&&(this.job.ludaro_manager_processing.splice(s,1),this.$emit("update-job",this.job))}}},Ys={class:"overflow-y-auto max-h-[50vh]"},Xs={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},Zs=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Input Items"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Output Item"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Seconds"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Animation Dir"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Animation"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Min Grade"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Coords"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Actions")])],-1),qs={class:"bg-gray-700 divide-y divide-gray-600"},Qs={class:"px-4 py-2"},er=["onUpdate:modelValue"],tr={class:"px-4 py-2"},or=["onUpdate:modelValue"],sr={class:"px-4 py-2"},rr=["onUpdate:modelValue"],lr={class:"px-4 py-2"},nr=["onUpdate:modelValue"],ar={class:"px-4 py-2"},dr=["onUpdate:modelValue"],ir={class:"px-4 py-2"},cr=["onUpdate:modelValue"],br=["value"],ur={class:"px-4 py-2"},pr=["onUpdate:modelValue"],hr=["onUpdate:modelValue"],mr=["onUpdate:modelValue"],gr=["onClick"],yr={class:"px-4 py-2"},xr=["onClick"],fr={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},wr={class:"bg-gray-800 text-white p-4 rounded w-1/2 overflow-auto max-h-[90vh]"},_r=e("h3",{class:"text-lg font-bold mb-4"},"Add New Processing",-1),vr={class:"mb-4"},kr=e("label",{class:"block mb-2"},"Input Items",-1),jr={class:"mb-4"},Cr=e("label",{class:"block mb-2"},"Output Item",-1),Sr={class:"mb-4"},Ur=e("label",{class:"block mb-2"},"Seconds",-1),Pr={class:"mb-4"},Vr=e("label",{class:"block mb-2"},"Animation Dir",-1),Mr={class:"mb-4"},Ir=e("label",{class:"block mb-2"},"Animation",-1),Nr={class:"mb-4"},Jr=e("label",{class:"block mb-2"},"Min Grade",-1),Gr=["value"],$r={class:"mb-4"},zr=e("label",{class:"block mb-2"},"Coords",-1),Tr={class:"mt-4"};function Ar(s,t,r,u,l,i){return c(),b("div",Ys,[e("table",Xs,[Zs,e("tbody",qs,[(c(!0),b(g,null,y(r.job.ludaro_manager_processing,(o,p)=>(c(),b("tr",{key:p},[e("td",Qs,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.inputItems=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,er),[[d,o.inputItems]])]),e("td",tr,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.outputItem=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,or),[[d,o.outputItem]])]),e("td",sr,[n(e("input",{type:"number","onUpdate:modelValue":a=>o.seconds=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,rr),[[d,o.seconds]])]),e("td",lr,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.animationDir=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,nr),[[d,o.animationDir]])]),e("td",ar,[n(e("input",{type:"text","onUpdate:modelValue":a=>o.animation=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,dr),[[d,o.animation]])]),e("td",ir,[n(e("select",{"onUpdate:modelValue":a=>o.minimumGrade=a,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},[(c(!0),b(g,null,y(r.job.grades,a=>(c(),b("option",{key:a.grade,value:a.grade},h(a.label)+" (ID: "+h(a.grade)+") ",9,br))),128))],8,cr),[[_,o.minimumGrade]])]),e("td",ur,[n(e("input",{type:"number","onUpdate:modelValue":a=>o.coords.x=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,8,pr),[[d,o.coords.x]]),n(e("input",{type:"number","onUpdate:modelValue":a=>o.coords.y=a,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,8,hr),[[d,o.coords.y]]),n(e("input",{type:"number","onUpdate:modelValue":a=>o.coords.z=a,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,8,mr),[[d,o.coords.z]]),e("button",{onClick:a=>i.fetchCurrentCoords(p),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords",8,gr)]),e("td",yr,[e("button",{onClick:a=>i.removeProcessing(p),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},"Remove",8,xr)])]))),128))])]),e("button",{onClick:t[0]||(t[0]=o=>l.showAddProcessingPopup=!0),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},"Add Processing"),l.showAddProcessingPopup?(c(),b("div",fr,[e("div",wr,[_r,e("div",vr,[kr,n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l.newProcessing.inputItems=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newProcessing.inputItems]])]),e("div",jr,[Cr,n(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>l.newProcessing.outputItem=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newProcessing.outputItem]])]),e("div",Sr,[Ur,n(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>l.newProcessing.seconds=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newProcessing.seconds]])]),e("div",Pr,[Vr,n(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>l.newProcessing.animationDir=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newProcessing.animationDir]])]),e("div",Mr,[Ir,n(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>l.newProcessing.animation=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newProcessing.animation]])]),e("div",Nr,[Jr,n(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.newProcessing.minimumGrade=o),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},[(c(!0),b(g,null,y(r.job.grades,o=>(c(),b("option",{key:o.grade,value:o.grade},h(o.label)+" (ID: "+h(o.grade)+") ",9,Gr))),128))],512),[[_,l.newProcessing.minimumGrade]])]),e("div",$r,[zr,n(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=o=>l.newProcessing.coords.x=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[d,l.newProcessing.coords.x]]),n(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=o=>l.newProcessing.coords.y=o),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[d,l.newProcessing.coords.y]]),n(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=o=>l.newProcessing.coords.z=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[d,l.newProcessing.coords.z]]),e("button",{onClick:t[10]||(t[10]=o=>i.fetchCurrentCoords(null,!0)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},"Use Current Coords")]),e("div",Tr,[e("button",{onClick:t[11]||(t[11]=(...o)=>i.addNewProcessing&&i.addNewProcessing(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"Add Processing"),e("button",{onClick:t[12]||(t[12]=o=>l.showAddProcessingPopup=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"Cancel")])])])):x("",!0)])}const Br=v(Ks,[["render",Ar]]),Or={data(){return{loading:!0,loadingData:!1,jobs:{},interactions:[],editingJobName:null,isPopupVisible:!1,activeTab:"JobInfo",showAddJobPopup:!1,lastSaveTime:0,newJob:{name:"",label:"",whitelisted:!1,grades:[],vehicles:[],bossmenu:{coords:{x:null,y:null,z:null},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1},onOffDutyCoords:{x:null,y:null,z:null},garageCoords:{x:null,y:null,z:null},stashes:[],shops:[],processing:[],vehicleShop:{coords:{x:null,y:null,z:null},type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,vehicles:[]}},newGrade:{grade:"",name:"",label:"",salary:0},newInteraction:"",newVehicle:{name:"",price:0,paidBy:"society",grade:""},jobToDelete:null,tabs:["JobInfo","Grades","BossMenu","Interactions","Garage","OnOffDuty","Employees","Stashes","Shops","Processing"],error:""}},mounted(){this.fetchJobsAndInteractions(),document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown)},computed:{activeTabComponent(){return{JobInfo:z,Grades:ie,BossMenu:qe,Interactions:pt,Garage:ho,OnOffDuty:So,Employees:Do,Stashes:Wo,Shops:Ws,Processing:Br}[this.activeTab]||"div"}},methods:{async fetchJobsAndInteractions(){try{this.loading=!0;const t=await(await fetch(`https://${GetParentResourceName()}/getJobData`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})})).json(),u=await(await fetch(`https://${GetParentResourceName()}/getInteractions`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})})).json();Object.keys(t).forEach(l=>{t[l].grades||(t[l].grades=[]),(!t[l].interactions||t[l].interactions.length===0)&&(t[l].interactions=[]),t[l].vehicles||(t[l].vehicles=[]),t[l].bossmenu||(t[l].bossmenu={coords:{x:null,y:null,z:null},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1}),t[l].employees||(t[l].employees=[]),t[l].vehicleShop||(t[l].vehicleShop={coords:{x:null,y:null,z:null},type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,vehicles:[]})}),this.jobs=t,this.interactions=u.filter(l=>l!=="[]"),this.loading=!1}catch(s){console.error("Failed to fetch job or interaction data:",s),this.loading=!1}},editJob(s){this.editingJobName=s,this.activeTab="JobInfo",this.isPopupVisible=!0},saveJob(s){this.jobs[s],console.log(JSON.stringify(this.jobs[s])),fetch(`https://${GetParentResourceName()}/saveJob`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(this.jobs[s])}).then(t=>t.json()).then(t=>{t.success&&(this.isPopupVisible=!1,this.editingJobName=null,this.refreshData())}).catch(t=>{console.error("Failed to save job:",t)})},closePopup(){this.isPopupVisible=!1},handleKeydown(s){s.key==="Escape"&&this.closePopup()},confirmDeleteJob(s){this.jobToDelete=s},deleteJob(s){const t=this.jobs[s];fetch(`https://${GetParentResourceName()}/deleteJob`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:t.name})}).then(r=>r.json()).then(r=>{if(r.success){const u={...this.jobs};delete u[s],this.jobs=u,this.jobToDelete=null}}).catch(r=>{console.error("Failed to delete job:",r)})},openAddJobPopup(){this.showAddJobPopup=!0},addNewJob(){if(Object.values(this.jobs).some(t=>t.name===this.newJob.name||t.label===this.newJob.label)){this.error="A job with the same name or label already exists. Please use a different name or label.";return}fetch(`https://${GetParentResourceName()}/addJob`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(this.newJob)}).then(t=>t.json()).then(t=>{t.success?(this.jobs={...this.jobs,[t.jobName]:this.newJob},this.showAddJobPopup=!1,this.newJob={name:"",label:"",whitelisted:!1,grades:[],vehicles:[],bossmenu:{coords:{x:null,y:null,z:null},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1},onOffDutyCoords:{x:null,y:null,z:null},garageCoords:{x:null,y:null,z:null},stashes:[],shops:[],processing:[],vehicleShop:{coords:{x:null,y:null,z:null},type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,vehicles:[]}},this.refreshData()):this.error="Failed to add new job. Please try again."}).catch(t=>{console.error("Failed to add new job:",t),this.error="Failed to add new job. Please try again."})},refreshData(){this.loadingData=!0,this.fetchJobsAndInteractions().then(()=>{this.loadingData=!1})},updateJob(s){this.jobs[this.editingJobName]=s}}},w=s=>(S("data-v-ce61aff1"),s=s(),U(),s),Dr={key:0,class:"flex justify-center items-center h-screen"},Rr=w(()=>e("span",{class:"text-2xl text-white"},"Loading...",-1)),Fr=[Rr],Hr={key:1,class:"container mx-auto p-4 overflow-auto max-h-[90vh]"},Er={class:"overflow-x-auto"},Lr={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},Wr=w(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Job Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Job Label"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Whitelisted"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Active Players"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},"Actions")])],-1)),Kr={class:"bg-gray-700 divide-y divide-gray-600"},Yr=["onClick"],Xr={class:"px-6 py-4 whitespace-nowrap"},Zr={class:"px-6 py-4 whitespace-nowrap"},qr={class:"px-6 py-4 whitespace-nowrap"},Qr={class:"px-6 py-4 whitespace-nowrap"},el={class:"px-6 py-4 whitespace-nowrap"},tl=["onClick"],ol={class:"bg-gray-800 text-white p-4 rounded w-3/4 overflow-auto max-h-[90vh]"},sl=w(()=>e("h3",{class:"text-lg font-bold mb-4"},"Edit Job",-1)),rl={class:"mb-4"},ll=w(()=>e("label",{class:"block mb-2"},"Job Name",-1)),nl={class:"mb-4"},al=w(()=>e("label",{class:"block mb-2"},"Job Label",-1)),dl={class:"mb-4"},il=w(()=>e("label",{class:"block mb-2"},"Whitelisted",-1)),cl={class:"mb-4"},bl={class:"flex mb-4 border-b border-gray-600"},ul=["onClick"],pl={class:"mt-4"},hl={class:"bg-gray-800 text-white p-4 rounded w-1/2"},ml=w(()=>e("h3",{class:"text-lg font-bold mb-4"},"Add New Job",-1)),gl={class:"mb-4"},yl=w(()=>e("label",{class:"block mb-2"},"Job Name",-1)),xl={class:"mb-4"},fl=w(()=>e("label",{class:"block mb-2"},"Job Label",-1)),wl={class:"mb-4"},_l=w(()=>e("label",{class:"block mb-2"},"Whitelisted",-1)),vl={class:"mt-4"},kl={key:0,class:"mt-4 text-red-500"},jl={class:"bg-gray-800 text-white p-4 rounded w-1/2"},Cl=w(()=>e("h3",{class:"text-lg font-bold mb-4"},"Confirm Delete Job",-1)),Sl=w(()=>e("p",null,"Are you sure you want to delete this job?",-1)),Ul={class:"mt-4"};function Pl(s,t,r,u,l,i){return c(),b("div",null,[l.loading?(c(),b("div",Dr,Fr)):(c(),b("div",Hr,[e("div",Er,[e("table",Lr,[Wr,e("tbody",Kr,[(c(!0),b(g,null,y(l.jobs,(o,p)=>(c(),b("tr",{key:p,onClick:a=>i.editJob(p),class:"hover:bg-gray-600 cursor-pointer"},[e("td",Xr,h(o.name),1),e("td",Zr,h(o.label),1),e("td",qr,h(o.whitelisted?"✔️":"❌"),1),e("td",Qr,h(o.activeplayers),1),e("td",el,[e("button",{onClick:j(a=>i.confirmDeleteJob(p),["stop"]),class:"text-red-500 hover:text-red-700"},"🗑️",8,tl)])],8,Yr))),128))])])]),e("button",{class:"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",onClick:t[0]||(t[0]=(...o)=>i.openAddJobPopup&&i.openAddJobPopup(...o))},"Add New Job")])),l.isPopupVisible?(c(),b("div",{key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",onClick:t[6]||(t[6]=j((...o)=>i.closePopup&&i.closePopup(...o),["self"]))},[e("div",ol,[sl,e("div",rl,[ll,n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l.jobs[l.editingJobName].name=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.jobs[l.editingJobName].name]])]),e("div",nl,[al,n(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>l.jobs[l.editingJobName].label=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.jobs[l.editingJobName].label]])]),e("div",dl,[il,n(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=o=>l.jobs[l.editingJobName].whitelisted=o)},null,512),[[k,l.jobs[l.editingJobName].whitelisted]])]),e("div",cl,[e("nav",bl,[(c(!0),b(g,null,y(l.tabs,o=>(c(),b("a",{key:o,onClick:p=>l.activeTab=o,class:C(["cursor-pointer p-2 rounded-t-lg text-white",l.activeTab===o?"bg-blue-600":""])},h(o),11,ul))),128))]),(c(),V(M(i.activeTabComponent),{job:l.jobs[l.editingJobName],onUpdateJob:i.updateJob},null,40,["job","onUpdateJob"]))]),e("div",pl,[e("button",{onClick:t[4]||(t[4]=o=>i.saveJob(l.editingJobName)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"Save"),e("button",{onClick:t[5]||(t[5]=(...o)=>i.closePopup&&i.closePopup(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"Cancel")])])])):x("",!0),l.showAddJobPopup?(c(),b("div",{key:3,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",onClick:t[12]||(t[12]=j((...o)=>i.closePopup&&i.closePopup(...o),["self"]))},[e("div",hl,[ml,e("div",gl,[yl,n(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>l.newJob.name=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newJob.name]])]),e("div",xl,[fl,n(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>l.newJob.label=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[d,l.newJob.label]])]),e("div",wl,[_l,n(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>l.newJob.whitelisted=o)},null,512),[[k,l.newJob.whitelisted]])]),e("div",vl,[e("button",{onClick:t[10]||(t[10]=(...o)=>i.addNewJob&&i.addNewJob(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"Add Job"),e("button",{onClick:t[11]||(t[11]=(...o)=>i.closePopup&&i.closePopup(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"Cancel")]),l.error?(c(),b("div",kl,h(l.error),1)):x("",!0)])])):x("",!0),l.jobToDelete!==null?(c(),b("div",{key:4,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",onClick:t[15]||(t[15]=j((...o)=>i.closePopup&&i.closePopup(...o),["self"]))},[e("div",jl,[Cl,Sl,e("div",Ul,[e("button",{onClick:t[13]||(t[13]=o=>i.deleteJob(l.jobToDelete)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},"Yes"),e("button",{onClick:t[14]||(t[14]=(...o)=>i.closePopup&&i.closePopup(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"No")])])])):x("",!0)])}const Ml=v(Or,[["render",Pl],["__scopeId","data-v-ce61aff1"]]);export{Ml as default};
