import{_ as R,r as y,o as D,a as r,c as i,b as e,t as n,F as h,d as f,e as b,m as g,w as d,v as m,h as x,g as S,p as E,f as H}from"./index-CZrQt0oH.js";const v=_=>(E("data-v-ea92ccd8"),_=_(),H(),_),K={class:"farming-management-container"},Q={class:"text-2xl font-bold mb-4 text-white"},W={key:0},X={class:"text-white mb-4"},Y={key:1},Z={class:"flex justify-between items-center"},ee=["onClick"],te={class:"text-lg font-bold mb-2 text-white"},oe={class:"text-sm text-gray-400"},se=["onClick"],ae={key:2,class:"modal-overlay"},ne={class:"modal-content"},le={class:"text-lg font-bold mb-2 text-white"},re={key:0,class:"text-red-500 mb-4"},ie={class:"mb-4"},de={class:"block mb-2 text-white"},ue=v(()=>e("span",{class:"text-red-500"},"*",-1)),ce={class:"mb-4"},me={class:"block mb-2 text-white"},pe=v(()=>e("span",{class:"text-red-500"},"*",-1)),be={class:"coords-input-group"},ge={class:"mb-4"},ve={class:"block mb-2 text-white"},ye=v(()=>e("span",{class:"text-red-500"},"*",-1)),he={value:"none"},fe=["value"],we={class:"block mb-2 text-white"},_e=v(()=>e("span",{class:"text-red-500"},"*",-1)),xe={class:"mb-4"},$e={class:"block mb-2 text-white"},ke=v(()=>e("span",{class:"text-red-500"},"*",-1)),Ce={value:"none"},Ie=["value"],Ve={class:"mb-4"},Se={class:"block mb-2 text-white"},Ue=v(()=>e("span",{class:"text-red-500"},"*",-1)),Fe={class:"mb-4"},Ne={class:"block mb-2 text-white"},Oe={class:"mb-4"},Me={class:"block mb-2 text-white"},Te=v(()=>e("span",{class:"text-red-500"},"*",-1)),Pe=["onUpdate:modelValue"],je=["onUpdate:modelValue"],ze=["onClick"],Ae={class:"mb-4"},Ge={class:"block mb-2 text-white"},Je=v(()=>e("span",{class:"text-red-500"},"*",-1)),Be=["onUpdate:modelValue"],qe=["onUpdate:modelValue"],Le=["onClick"],Re={class:"mb-4"},De={class:"block mb-2 text-white"},Ee={key:0},He={class:"block mb-2 text-white"},Ke={value:"money"},Qe={value:"bank"},We={value:"black_money"},Xe={class:"block mb-2 text-white"},Ye={value:"none"},Ze=["value"],et={key:1},tt={class:"block mb-2 text-white"},ot={class:"mb-4"},st={class:"block mb-2 text-white"},at={class:"mb-4"},nt={class:"block mb-2 text-white"},lt={key:0},rt={class:"block mb-2 text-white"},it=["onUpdate:modelValue"],dt=["onUpdate:modelValue"],ut=["onUpdate:modelValue"],ct=["onClick"],mt={key:1,class:"text-red-500 mb-4"},pt={__name:"farming",setup(_){const p=y([]),t=y(null),w=y(!1),k=y([]),C=y([]),I=y([]),l=y(""),U=async()=>{try{const s=await(await fetch(`https://${GetParentResourceName()}/getFarmingSpots`)).json();p.value=s.farmingSpots||[]}catch(o){console.error("Failed to fetch farming spots:",o)}},F=async()=>{try{const s=await(await fetch(`https://${GetParentResourceName()}/getJobs`)).json();k.value=s.jobs||[]}catch(o){console.error("Failed to fetch jobs:",o)}},N=async()=>{try{const s=await(await fetch(`https://${GetParentResourceName()}/getAnimations`)).json();C.value=s.animations||[]}catch(o){console.error("Failed to fetch animations:",o)}},O=async()=>{try{const s=await(await fetch(`https://${GetParentResourceName()}/getSocieties`)).json();I.value=s.societies||[]}catch(o){console.error("Failed to fetch societies:",o)}},$=(o=null)=>{l.value="",o!==null?(t.value={...p.value[o]},t.value.coords=t.value.coords||{x:0,y:0,z:0},t.value.itemsIn=t.value.itemsIn||[],t.value.itemsOut=t.value.itemsOut||[],t.value.additionalCoords=t.value.additionalCoords||[]):t.value={name:"",coords:{x:0,y:0,z:0},job:"",grade:0,animation:"",customAnimation:"",time:0,progressBar:!1,itemsIn:[],itemsOut:[],moneyNeeded:0,moneyType:"money",society:"none",societyPercentage:0,customCode:"",multiLocation:!1,additionalCoords:[]},w.value=!0},M=()=>{if(l.value="",!t.value.name){l.value="Name is required.";return}if(!t.value.coords.x||!t.value.coords.y||!t.value.coords.z){l.value="Coordinates are required.";return}if(!t.value.job){l.value="Job is required.";return}if(t.value.itemsIn.length===0){l.value="At least one Item In is required.";return}if(t.value.itemsOut.length===0){l.value="At least one Item Out is required.";return}T()},V=()=>{t.value=null,w.value=!1},T=async()=>{const o={name:"",coords:{x:0,y:0,z:0},job:"none",grade:0,animation:"none",customAnimation:"",time:0,progressBar:!1,itemsIn:[],itemsOut:[],moneyNeeded:0,moneyType:"money",society:"none",societyPercentage:0,customCode:"",multiLocation:!1,additionalCoords:[]},s={...o,...t.value,coords:{...o.coords,...t.value.coords},itemsIn:t.value.itemsIn.length>0?t.value.itemsIn:o.itemsIn,itemsOut:t.value.itemsOut.length>0?t.value.itemsOut:o.itemsOut,additionalCoords:t.value.additionalCoords.length>0?t.value.additionalCoords:o.additionalCoords};if(!s.name){l.value=$t("errorMissingName"),console.log("Validation failed: Name is missing");return}if(!s.coords.x||!s.coords.y||!s.coords.z){l.value=$t("errorMissingCoordinates"),console.log("Validation failed: Coordinates are incomplete","x:",s.coords.x,"y:",s.coords.y,"z:",s.coords.z);return}if(!s.job){l.value=$t("errorMissingJob"),console.log("Validation failed: Job is missing");return}if(!s.grade){l.value=$t("errorMissingGrade"),console.log("Validation failed: Grade is missing");return}if(!s.animation){l.value=$t("errorMissingAnimation"),console.log("Validation failed: Animation is missing");return}if(!s.time){l.value=$t("errorMissingTime"),console.log("Validation failed: Time is missing");return}if(s.itemsIn.length===0){l.value=$t("errorMissingItemsIn"),console.log("Validation failed: No Items In specified");return}if(s.itemsOut.length===0){l.value=$t("errorMissingItemsOut"),console.log("Validation failed: No Items Out specified");return}if(s.moneyNeeded>0&&!s.moneyType){l.value=$t("errorMissingMoneyType"),console.log("Validation failed: Money type must be specified if money is needed");return}if(s.society!=="none"&&s.societyPercentage===0){l.value=$t("errorMissingSocietyPercentage"),console.log("Validation failed: Society percentage must be specified if society is set");return}if(s.moneyNeeded>0&&!s.moneyType){l.value="Money type must be specified if money is needed.";return}if(s.society!=="none"&&s.societyPercentage===0){l.value="Society percentage must be specified if society is set.";return}try{const u=await(await fetch(`https://${GetParentResourceName()}/saveFarmingSpot`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({farmingSpot:s})})).json();if(u.success){if(t.value.id){const c=p.value.findIndex(L=>L.id===t.value.id);c!==-1&&(p.value[c]=u.farmingSpot)}else p.value.push(u.farmingSpot);V()}else l.value="Failed to save farming spot: "+u.error,console.error("Failed to save farming spot:",u.error)}catch(a){l.value="An error occurred while saving the farming spot.",console.error("Failed to save farming spot:",a)}},P=async o=>{const s=p.value[o].id;try{const u=await(await fetch(`https://${GetParentResourceName()}/deleteFarmingSpot`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({id:s})})).json();u.success?p.value.splice(o,1):(l.value="Failed to delete farming spot: "+u.error,console.error("Failed to delete farming spot:",u.error))}catch(a){l.value="An error occurred while deleting the farming spot.",console.error("Failed to delete farming spot:",a)}},j=async()=>{try{const s=await(await fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})})).json();s&&(t.value.coords={x:s.x,y:s.y,z:s.z})}catch(o){console.error("Failed to fetch current coords:",o)}},z=()=>{t.value.itemsIn||(t.value.itemsIn=[]),t.value.itemsIn.push({name:"",count:0})},A=o=>{t.value.itemsIn.splice(o,1)},G=()=>{t.value.itemsOut||(t.value.itemsOut=[]),t.value.itemsOut.push({name:"",count:0})},J=o=>{t.value.itemsOut.splice(o,1)},B=()=>{t.value.additionalCoords||(t.value.additionalCoords=[]),t.value.additionalCoords.push({x:0,y:0,z:0})},q=o=>{t.value.additionalCoords.splice(o,1)};return D(()=>{U(),F(),N(),O()}),(o,s)=>(r(),i("div",K,[e("h2",Q,n(o.$t("farmingSpots")),1),w.value?w.value?b("",!0):(r(),i("div",Y,[e("button",{onClick:$,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4"},n(o.$t("createNewFarmingSpot")),1),(r(!0),i(h,null,f(p.value,(a,u)=>(r(),i("div",{key:u,class:"mb-4 p-4 border border-gray-600 rounded bg-gray-800"},[e("div",Z,[e("div",{onClick:c=>$(u),class:"cursor-pointer"},[e("h3",te,n(a.name||o.$t("unnamedFarmingSpot")),1),e("p",oe,n(o.$t("clickToEdit")),1)],8,ee),e("button",{onClick:c=>P(u),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},n(o.$t("delete")),9,se)])]))),128))])):(r(),i("div",W,[e("p",X,n(o.$t("noFarmingSpots")),1),e("button",{onClick:$,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},n(o.$t("createNewFarmingSpot")),1)])),w.value?(r(),i("div",ae,[e("div",ne,[e("h3",le,n(t.value.name||o.$t("newFarmingSpot")),1),l.value?(r(),i("div",re,n(l.value),1)):b("",!0),e("div",ie,[e("label",de,[g(n(o.$t("spotName")),1),ue]),d(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>t.value.name=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[m,t.value.name]])]),e("div",ce,[e("label",me,[g(n(o.$t("coords"))+" (x, y, z)",1),pe]),e("div",be,[d(e("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=a=>t.value.coords.x=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[m,t.value.coords.x]]),d(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=a=>t.value.coords.y=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[m,t.value.coords.y]]),d(e("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=a=>t.value.coords.z=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[m,t.value.coords.z]])]),e("button",{onClick:j,class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},n(o.$t("useCurrentCoords")),1)]),e("div",ge,[e("label",ve,[g(n(o.$t("requiredJob")),1),ye]),d(e("select",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.value.job=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",he,n(o.$t("none")),1),(r(!0),i(h,null,f(k.value,a=>(r(),i("option",{key:a.name,value:a.name},n(a.label),9,fe))),128))],512),[[x,t.value.job]]),e("label",we,[g(n(o.$t("requiredGrade")),1),_e]),d(e("input",{type:"number","onUpdate:modelValue":s[5]||(s[5]=a=>t.value.grade=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",min:"0",value:"0"},null,512),[[m,t.value.grade]])]),e("div",xe,[e("label",$e,[g(n(o.$t("animation")),1),ke]),d(e("select",{"onUpdate:modelValue":s[6]||(s[6]=a=>t.value.animation=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",Ce,n(o.$t("noAnimation")),1),(r(!0),i(h,null,f(C.value,a=>(r(),i("option",{key:a.name,value:a.name},n(a.label),9,Ie))),128))],512),[[x,t.value.animation]]),t.value.animation==="custom"?d((r(),i("input",{key:0,type:"text","onUpdate:modelValue":s[7]||(s[7]=a=>t.value.customAnimation=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Custom Animation"},null,512)),[[m,t.value.customAnimation]]):b("",!0)]),e("div",Ve,[e("label",Se,[g(n(o.$t("timeInSeconds")),1),Ue]),d(e("input",{type:"number","onUpdate:modelValue":s[8]||(s[8]=a=>t.value.time=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[m,t.value.time]])]),e("div",Fe,[e("label",Ne,n(o.$t("progressBar")),1),d(e("input",{type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=a=>t.value.progressBar=a)},null,512),[[S,t.value.progressBar]])]),e("div",Oe,[e("label",Me,[g(n(o.$t("itemsIn")),1),Te]),(r(!0),i(h,null,f(t.value.itemsIn,(a,u)=>(r(),i("div",{key:u,class:"flex mb-2"},[d(e("input",{type:"text","onUpdate:modelValue":c=>a.name=c,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white mr-2",placeholder:"Item Name"},null,8,Pe),[[m,a.name]]),d(e("input",{type:"number","onUpdate:modelValue":c=>a.count=c,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Count"},null,8,je),[[m,a.count]]),e("button",{onClick:c=>A(u),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},n(o.$t("remove")),9,ze)]))),128)),e("button",{onClick:z,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},n(o.$t("addItemIn")),1)]),e("div",Ae,[e("label",Ge,[g(n(o.$t("itemsOut")),1),Je]),(r(!0),i(h,null,f(t.value.itemsOut,(a,u)=>(r(),i("div",{key:u,class:"flex mb-2"},[d(e("input",{type:"text","onUpdate:modelValue":c=>a.name=c,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white mr-2",placeholder:"Item Name"},null,8,Be),[[m,a.name]]),d(e("input",{type:"number","onUpdate:modelValue":c=>a.count=c,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Count"},null,8,qe),[[m,a.count]]),e("button",{onClick:c=>J(u),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},n(o.$t("remove")),9,Le)]))),128)),e("button",{onClick:G,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},n(o.$t("addItemOut")),1)]),e("div",Re,[e("label",De,n(o.$t("moneyNeeded")),1),d(e("input",{type:"number","onUpdate:modelValue":s[10]||(s[10]=a=>t.value.moneyNeeded=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[m,t.value.moneyNeeded]]),t.value.moneyNeeded>0?(r(),i("div",Ee,[e("label",He,n(o.$t("moneyType")),1),d(e("select",{"onUpdate:modelValue":s[11]||(s[11]=a=>t.value.moneyType=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",Ke,n(o.$t("cash")),1),e("option",Qe,n(o.$t("bank")),1),e("option",We,n(o.$t("blackMoney")),1)],512),[[x,t.value.moneyType]])])):b("",!0),e("label",Xe,n(o.$t("society")),1),d(e("select",{"onUpdate:modelValue":s[12]||(s[12]=a=>t.value.society=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",Ye,n(o.$t("none")),1),(r(!0),i(h,null,f(I.value,a=>(r(),i("option",{key:a.name,value:a.name},n(a.label),9,Ze))),128))],512),[[x,t.value.society]]),t.value.society!=="none"?(r(),i("div",et,[e("label",tt,n(o.$t("societyPercentage")),1),d(e("input",{type:"number","onUpdate:modelValue":s[13]||(s[13]=a=>t.value.societyPercentage=a),min:"0",max:"100",class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Percentage"},null,512),[[m,t.value.societyPercentage]])])):b("",!0)]),e("div",ot,[e("label",st,n(o.$t("customCode")),1),d(e("textarea",{"onUpdate:modelValue":s[14]||(s[14]=a=>t.value.customCode=a),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Custom Code"},null,512),[[m,t.value.customCode]])]),e("div",at,[e("label",nt,n(o.$t("multiLocation")),1),d(e("input",{type:"checkbox","onUpdate:modelValue":s[15]||(s[15]=a=>t.value.multiLocation=a)},null,512),[[S,t.value.multiLocation]]),t.value.multiLocation?(r(),i("div",lt,[e("label",rt,n(o.$t("additionalCoords"))+" (x, y, z)",1),(r(!0),i(h,null,f(t.value.additionalCoords,(a,u)=>(r(),i("div",{key:u,class:"flex mb-2"},[d(e("input",{type:"number","onUpdate:modelValue":c=>a.x=c,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white mr-2",placeholder:"x"},null,8,it),[[m,a.x]]),d(e("input",{type:"number","onUpdate:modelValue":c=>a.y=c,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white mr-2",placeholder:"y"},null,8,dt),[[m,a.y]]),d(e("input",{type:"number","onUpdate:modelValue":c=>a.z=c,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,8,ut),[[m,a.z]]),e("button",{onClick:c=>q(u),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},n(o.$t("remove")),9,ct)]))),128)),e("button",{onClick:B,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},n(o.$t("addAdditionalCoord")),1)])):b("",!0)]),e("button",{onClick:M,class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},n(o.$t("saveFarmingSpot")),1),e("button",{onClick:V,class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 mt-4"},n(o.$t("cancel")),1),l.value?(r(),i("div",mt,n(l.value),1)):b("",!0)])])):b("",!0)]))}},gt=R(pt,[["__scopeId","data-v-ea92ccd8"]]);export{gt as default};
