import{_ as b,c as r,a as e,F as w,r as g,w as p,v as y,d as m,o as a,t as h,p as _,i as x}from"./index-DRXqcQbe.js";const f={data(){return{loading:!0,societies:[],showAddSocietyPopup:!1,newSociety:{name:"",account:"",owner:""},societyToDelete:null}},mounted(){this.fetchSocieties()},methods:{async fetchSocieties(){try{const t=await(await fetch(`https://${GetParentResourceName()}/getSocietys`)).json();this.societies=t}catch(s){console.error("Failed to fetch societies:",s)}finally{this.loading=!1}},async addMoney(s){const t=this.societies.find(i=>i.name===s);if(t&&t.addMoney)try{(await(await fetch(`https://${GetParentResourceName()}/addMoney`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({name:s,amount:t.addMoney})})).json()).success&&(t.money+=t.addMoney,t.addMoney=0)}catch(i){console.error("Failed to add money:",i)}},async removeMoney(s){const t=this.societies.find(i=>i.name===s);if(t&&t.removeMoney)try{(await(await fetch(`https://${GetParentResourceName()}/removeMoney`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({name:s,amount:t.removeMoney})})).json()).success&&(t.money-=t.removeMoney,t.removeMoney=0)}catch(i){console.error("Failed to remove money:",i)}},openAddSocietyPopup(){this.showAddSocietyPopup=!0},async addNewSociety(){try{const t=await(await fetch(`https://${GetParentResourceName()}/addSociety`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(this.newSociety)})).json();t.success&&(this.societies.push(t.society),this.showAddSocietyPopup=!1,this.newSociety={name:"",account:"",owner:""})}catch(s){console.error("Failed to add new society:",s)}},confirmDeleteSociety(s){this.societyToDelete=s},async deleteSociety(s){try{(await(await fetch(`https://${GetParentResourceName()}/deleteSociety`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({name:s})})).json()).success&&(this.societies=this.societies.filter(u=>u.name!==s),this.societyToDelete=null)}catch(t){console.error("Failed to delete society:",t)}}}},c=s=>(_("data-v-a006ed92"),s=s(),x(),s),v={key:0,class:"loading-message"},S=c(()=>e("span",{class:"text"},"Loading...",-1)),k=[S],A={key:1,class:"container mx-auto p-4"},M={class:"society-list-container overflow-y-auto max-h-[70vh]"},N={class:"society-table w-full table-auto"},T=c(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-white"},"Name"),e("th",{class:"px-4 py-2 text-white"},"Account"),e("th",{class:"px-4 py-2 text-white"},"Owner"),e("th",{class:"px-4 py-2 text-white"},"Money"),e("th",{class:"px-4 py-2 text-white"},"Actions")])],-1)),P={class:"px-4 py-2"},C={class:"px-4 py-2"},j={class:"px-4 py-2"},F={class:"px-4 py-2"},U={class:"px-4 py-2"},D=["onUpdate:modelValue"],O=["onClick"],V=["onUpdate:modelValue"],R=["onClick"],G={key:2,class:"popup fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},I={class:"popup-content bg-gray-800 text-white p-4 rounded w-1/2"},J=c(()=>e("h3",{class:"text-lg font-bold mb-4"},"Add New Society",-1)),B={class:"mb-4"},L=c(()=>e("label",{class:"block mb-2"},"Society Name",-1)),E={class:"mb-4"},Y=c(()=>e("label",{class:"block mb-2"},"Account",-1)),q={class:"mb-4"},z=c(()=>e("label",{class:"block mb-2"},"Owner",-1)),H={class:"mt-4"},K={key:3,class:"popup fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},Q={class:"popup-content bg-gray-800 text-white p-4 rounded w-1/2"},W=c(()=>e("h3",{class:"text-lg font-bold mb-4"},"Confirm Delete Society",-1)),X=c(()=>e("p",null,"Are you sure you want to delete this society?",-1)),Z={class:"mt-4"};function $(s,t,i,u,n,d){return a(),r("div",null,[n.loading?(a(),r("div",v,k)):(a(),r("div",A,[e("div",M,[e("table",N,[T,e("tbody",null,[(a(!0),r(w,null,g(n.societies,o=>(a(),r("tr",{key:o.name,class:"cursor-pointer hover:bg-gray-700 text-white"},[e("td",P,h(o.name),1),e("td",C,h(o.account),1),e("td",j,h(o.owner||"N/A"),1),e("td",F,h(o.money),1),e("td",U,[p(e("input",{"onUpdate:modelValue":l=>o.addMoney=l,type:"number",placeholder:"Add Amount",class:"p-1 border rounded bg-gray-700 text-white"},null,8,D),[[y,o.addMoney,void 0,{number:!0}]]),e("button",{onClick:l=>d.addMoney(o.name),class:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600"},"Add",8,O),p(e("input",{"onUpdate:modelValue":l=>o.removeMoney=l,type:"number",placeholder:"Remove Amount",class:"p-1 border rounded bg-gray-700 text-white"},null,8,V),[[y,o.removeMoney,void 0,{number:!0}]]),e("button",{onClick:l=>d.removeMoney(o.name),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Remove",8,R)])]))),128))])])]),e("button",{class:"add-society-button mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",onClick:t[0]||(t[0]=(...o)=>d.openAddSocietyPopup&&d.openAddSocietyPopup(...o))},"Add New Society")])),n.showAddSocietyPopup?(a(),r("div",G,[e("div",I,[J,e("div",B,[L,p(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>n.newSociety.name=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[y,n.newSociety.name]])]),e("div",E,[Y,p(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>n.newSociety.account=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[y,n.newSociety.account]])]),e("div",q,[z,p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>n.newSociety.owner=o),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[y,n.newSociety.owner]])]),e("div",H,[e("button",{onClick:t[4]||(t[4]=(...o)=>d.addNewSociety&&d.addNewSociety(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},"Add Society"),e("button",{onClick:t[5]||(t[5]=o=>n.showAddSocietyPopup=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"Cancel")])])])):m("",!0),n.societyToDelete!==null?(a(),r("div",K,[e("div",Q,[W,X,e("div",Z,[e("button",{onClick:t[6]||(t[6]=o=>d.deleteSociety(n.societyToDelete)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},"Yes"),e("button",{onClick:t[7]||(t[7]=o=>n.societyToDelete=null),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},"No")])])])):m("",!0)])}const te=b(f,[["render",$],["__scopeId","data-v-a006ed92"]]);export{te as default};
