import{_ as x,o as u,c,a as e,t as r,w as a,v as i,b as v,F as m,r as g,d as y,e as w,n as _,f as k,g as $,h as C}from"./index-rRfJrdWo.js";const S={props:["job"]},U={class:"block mb-2"},V={class:"block mb-2"},P={class:"block mb-2"},M={class:"block mb-2"};function I(o,t,l,p,n,b){return u(),c("div",null,[e("div",null,[e("label",U,r(o.$t("jobName")),1),a(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>l.job.name=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,l.job.name]])]),e("div",null,[e("label",V,r(o.$t("jobLabel")),1),a(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>l.job.label=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,l.job.label]])]),e("div",null,[e("label",P,r(o.$t("whitelisted")),1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>l.job.whitelisted=s)},null,512),[[v,l.job.whitelisted]])]),e("div",null,[e("label",M,r(o.$t("societyPaid")),1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>l.job.societypaid=s)},null,512),[[v,l.job.societypaid]])])])}const N=x(S,[["render",I]]),J={props:["job"],data(){return{showAddGradePopup:!1,newGrade:{grade:"",name:"",label:"",salary:0},error:""}},methods:{addNewGrade(){if(this.job.grades.some(l=>l.name===this.newGrade.name||l.label===this.newGrade.label)){this.error="A grade with the same name or label already exists.";return}Array.isArray(this.job.grades)||(this.job.grades=[]);const t=Math.max(...this.job.grades.map(l=>l.grade),0);this.newGrade.grade=t+1,this.job.grades.push({...this.newGrade}),this.showAddGradePopup=!1,this.newGrade={grade:"",name:"",label:"",salary:0},this.error="",this.$emit("update-job",this.job)},removeGrade(o){this.job.grades.splice(o,1),this.$emit("update-job",this.job)},saveGrades(){fetch(`https://${GetParentResourceName()}/saveGrades`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,grades:this.job.grades})}).then(o=>o.json()).then(o=>{o.success?console.log("Grades saved successfully"):console.error("Failed to save grades")}).catch(o=>{console.error("Error saving grades:",o)})}}},G={class:"overflow-y-auto max-h-[50vh]"},z={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},T={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},B={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},O={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},D={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},R={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},A={class:"bg-gray-700 divide-y divide-gray-600"},H={class:"px-4 py-2"},F={class:"px-4 py-2"},E=["onUpdate:modelValue"],L={class:"px-4 py-2"},W=["onUpdate:modelValue"],K={class:"px-4 py-2"},X=["onUpdate:modelValue"],Y={class:"px-4 py-2"},Z=["onClick"],q={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},Q={class:"bg-gray-800 text-white p-4 rounded w-1/2"},ee={class:"text-lg font-bold mb-4"},te={class:"mb-4"},oe={class:"block mb-2"},se={class:"mb-4"},re={class:"block mb-2"},le={class:"mb-4"},ne={class:"block mb-2"},ae={class:"mt-4"},de={key:0,class:"text-red-500"};function ie(o,t,l,p,n,b){return u(),c("div",G,[e("table",z,[e("thead",null,[e("tr",null,[e("th",T,r(o.$t("gradeId")),1),e("th",B,r(o.$t("gradeSpawnName")),1),e("th",O,r(o.$t("gradeName")),1),e("th",D,r(o.$t("salary")),1),e("th",R,r(o.$t("actions")),1)])]),e("tbody",A,[(u(!0),c(m,null,g(l.job.grades,(s,h)=>(u(),c("tr",{key:h},[e("td",H,r(s.grade),1),e("td",F,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.name=d,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,E),[[i,s.name]])]),e("td",L,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.label=d,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,W),[[i,s.label]])]),e("td",K,[a(e("input",{type:"number","onUpdate:modelValue":d=>s.salary=d,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,X),[[i,s.salary]])]),e("td",Y,[e("button",{onClick:d=>b.removeGrade(h),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},r(o.$t("remove")),9,Z)])]))),128))])]),e("button",{onClick:t[0]||(t[0]=s=>n.showAddGradePopup=!0),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},r(o.$t("addGrade")),1),n.showAddGradePopup?(u(),c("div",q,[e("div",Q,[e("h3",ee,r(o.$t("addNewGrade")),1),e("div",te,[e("label",oe,r(o.$t("gradeSpawnName")),1),a(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>n.newGrade.name=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newGrade.name]])]),e("div",se,[e("label",re,r(o.$t("gradeName")),1),a(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>n.newGrade.label=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newGrade.label]])]),e("div",le,[e("label",ne,r(o.$t("salary")),1),a(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=s=>n.newGrade.salary=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newGrade.salary]])]),e("div",ae,[n.error?(u(),c("span",de,r(n.error),1)):y("",!0),e("button",{onClick:t[4]||(t[4]=(...s)=>b.addNewGrade&&b.addNewGrade(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},r(o.$t("addGrade")),1),e("button",{onClick:t[5]||(t[5]=s=>n.showAddGradePopup=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},r(o.$t("cancel")),1)])])])):y("",!0),e("button",{onClick:t[6]||(t[6]=(...s)=>b.saveGrades&&b.saveGrades(...s)),class:"mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},r(o.$t("saveGrades")),1)])}const be=x(J,[["render",ie]]),ue={props:["job"],data(){return{localBossMenu:{coords:{x:0,y:0,z:0},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,marker:{markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,bobUpAndDown:!1,faceCamera:!1}}}},beforeMount(){try{console.log(JSON.stringify(this.job));const o=JSON.parse(this.job.ludaro_manager_bossmenu||"{}");this.localBossMenu={coords:o.coords||{x:0,y:0,z:0},grade:o.grade||"",type:o.type||"npc",npcModel:o.npcModel||"",npcHeading:o.npcHeading||0,npcRange:o.npcRange||0,marker:{markerId:o.marker?o.marker.markerId:0,markerColor:o.marker?o.marker.markerColor:{r:0,g:0,b:0},markerScale:o.marker?o.marker.markerScale:1,bobUpAndDown:o.marker?o.marker.bobUpAndDown:!1,faceCamera:o.marker?o.marker.faceCamera:!1}},console.log("Initialized localBossMenu:",JSON.stringify(this.localBossMenu))}catch(o){console.error("Error parsing bossmenu data:",o)}},methods:{fetchCurrentCoords(){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(o=>o.json()).then(o=>{o&&(this.localBossMenu.coords={x:o.x,y:o.y,z:o.z},this.updateJobBossMenu(),console.log("Updated localBossMenu coords:",this.localBossMenu.coords))}).catch(o=>{console.error("Failed to fetch current coords:",o)})},fetchCurrentHeading(){fetch(`https://${GetParentResourceName()}/getCurrentHeading`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(o=>o.json()).then(o=>{o.heading&&(this.localBossMenu.npcHeading=o.heading,this.updateJobBossMenu(),console.log("Updated localBossMenu heading:",this.localBossMenu.npcHeading))}).catch(o=>{console.error("Failed to fetch current heading:",o)})},initializeMarkerColor(){this.localBossMenu.marker.markerColor||(this.localBossMenu.marker.markerColor={r:0,g:0,b:0},this.updateJobBossMenu(),console.log("Initialized marker color to default:",this.localBossMenu.marker.markerColor))},updateJobBossMenu(){this.job.bossmenu={...this.localBossMenu},this.$emit("update-job",this.job)}},watch:{localBossMenu:{handler(){this.updateJobBossMenu()},deep:!0}}},ce={class:"mb-4"},pe={class:"block mb-2 font-bold"},he={class:"flex"},me={class:"flex flex-col"},ge=e("label",{class:"mb-1"},"X:",-1),ye={class:"flex flex-col"},fe=e("label",{class:"mb-1"},"Y:",-1),we={class:"flex flex-col"},xe=e("label",{class:"mb-1"},"Z:",-1),ve={class:"mb-4"},ke={class:"block mb-2 font-bold"},_e=["value"],je={class:"mb-4"},$e={class:"block mb-2 font-bold"},Ce={value:"npc"},Se={value:"marker"},Ue={key:0},Ve={class:"flex flex-col"},Pe={class:"mb-1"},Me={class:"flex flex-col"},Ie={class:"mb-1"},Ne={class:"flex flex-col"},Je={class:"mb-1"},Ge={key:1},ze={class:"flex flex-col"},Te={class:"mb-1"},Be={class:"flex"},Oe={class:"flex flex-col mr-2"},De=e("label",{class:"mb-1"},"R:",-1),Re={class:"flex flex-col mr-2"},Ae=e("label",{class:"mb-1"},"G:",-1),He={class:"flex flex-col"},Fe=e("label",{class:"mb-1"},"B:",-1),Ee={class:"flex flex-col"},Le={class:"mb-1"},We={class:"flex flex-col"},Ke={class:"mb-1"},Xe={class:"flex flex-col"},Ye={class:"mb-1"};function Ze(o,t,l,p,n,b){return u(),c("div",null,[e("div",ce,[e("label",pe,r(o.$t("bossMenuCoords"))+" (x, y, z)",1),e("div",he,[e("div",me,[ge,a(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>n.localBossMenu.coords.x=s),class:"w-full p-2 mr-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[i,n.localBossMenu.coords.x]])]),e("div",ye,[fe,a(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>n.localBossMenu.coords.y=s),class:"w-full p-2 mr-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[i,n.localBossMenu.coords.y]])]),e("div",we,[xe,a(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>n.localBossMenu.coords.z=s),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[i,n.localBossMenu.coords.z]])])]),e("button",{onClick:t[3]||(t[3]=(...s)=>b.fetchCurrentCoords&&b.fetchCurrentCoords(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),1)]),e("div",ve,[e("label",ke,r(o.$t("bossMenuGradeAccess")),1),a(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.localBossMenu.grade=s),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},[(u(!0),c(m,null,g(l.job.grades,s=>(u(),c("option",{key:s.grade,value:s.grade},r(s.label)+" (ID: "+r(s.grade)+") ",9,_e))),128))],512),[[w,n.localBossMenu.grade]])]),e("div",je,[e("label",$e,r(o.$t("bossMenuNpcMarker")),1),a(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>n.localBossMenu.type=s),onChange:t[6]||(t[6]=(...s)=>b.initializeMarkerColor&&b.initializeMarkerColor(...s)),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",Ce,r(o.$t("npc")),1),e("option",Se,r(o.$t("marker")),1)],544),[[w,n.localBossMenu.type]]),n.localBossMenu.type==="npc"?(u(),c("div",Ue,[e("div",Ve,[e("label",Pe,r(o.$t("npcModel"))+":",1),a(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>n.localBossMenu.npcModel=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[i,n.localBossMenu.npcModel]])]),e("div",Me,[e("label",Ie,r(o.$t("npcHeading"))+":",1),a(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=s=>n.localBossMenu.npcHeading=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[i,n.localBossMenu.npcHeading]])]),e("div",Ne,[e("label",Je,r(o.$t("npcRange"))+":",1),a(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>n.localBossMenu.npcRange=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Range"},null,512),[[i,n.localBossMenu.npcRange]])]),e("button",{onClick:t[10]||(t[10]=(...s)=>b.fetchCurrentHeading&&b.fetchCurrentHeading(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentHeading")),1)])):n.localBossMenu.type==="marker"?(u(),c("div",Ge,[e("div",ze,[e("label",Te,r(o.$t("markerId"))+":",1),a(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=s=>n.localBossMenu.marker.markerId=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[i,n.localBossMenu.marker.markerId]])]),e("div",Be,[e("div",Oe,[De,a(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=s=>n.localBossMenu.marker.markerColor.r=s),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[i,n.localBossMenu.marker.markerColor.r]])]),e("div",Re,[Ae,a(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=s=>n.localBossMenu.marker.markerColor.g=s),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[i,n.localBossMenu.marker.markerColor.g]])]),e("div",He,[Fe,a(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=s=>n.localBossMenu.marker.markerColor.b=s),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[i,n.localBossMenu.marker.markerColor.b]])])]),e("div",Ee,[e("label",Le,r(o.$t("markerScale"))+":",1),a(e("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=s=>n.localBossMenu.marker.markerScale=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[i,n.localBossMenu.marker.markerScale]])]),e("div",We,[e("label",Ke,r(o.$t("bobUpAndDown"))+":",1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=s=>n.localBossMenu.marker.bobUpAndDown=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[v,n.localBossMenu.marker.bobUpAndDown]])]),e("div",Xe,[e("label",Ye,r(o.$t("faceCamera"))+":",1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=s=>n.localBossMenu.marker.faceCamera=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[v,n.localBossMenu.marker.faceCamera]])])])):y("",!0)])])}const qe=x(ue,[["render",Ze]]),Qe={props:["job"],data(){return{newInteraction:"",availableInteractions:[],error:""}},mounted(){this.fetchAvailableInteractions(),this.job.interactions=JSON.parse(this.job.ludaro_manager_interactions||"[]")},methods:{async fetchAvailableInteractions(){try{const o=await fetch(`https://${GetParentResourceName()}/getInteractions`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})});this.availableInteractions=await o.json(),console.log("Fetched interactions:",this.availableInteractions)}catch(o){console.error("Failed to fetch available interactions:",o),this.error="Failed to load interactions. Please try again later."}},async addInteraction(){if(!this.newInteraction){this.error="Please select a valid interaction.";return}this.error="",Array.isArray(this.job.interactions)||(this.job.interactions=[]);try{const t=await(await fetch(`https://${GetParentResourceName()}/addInteraction`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,interaction:this.newInteraction})})).json();console.log("Interaction add status:",t.success),t.success===!0||t.success==="true"||t.success===void 0?(this.job.interactions.push(this.newInteraction),this.newInteraction="",this.$emit("update-job",this.job)):this.error="Failed to add interaction. Please try again."}catch(o){console.error("Failed to add interaction:",o),this.error="Failed to add interaction. Please try again."}},async removeInteraction(o){const t=this.job.interactions[o];try{const p=await(await fetch(`https://${GetParentResourceName()}/removeInteraction`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,interaction:t})})).json();console.log("Interaction remove status:",p.success),p.success===!0||p.success==="true"||p.success===void 0?(this.job.interactions.splice(o,1),this.$emit("update-job",this.job)):this.error="Failed to remove interaction. Please try again."}catch(l){console.error("Failed to remove interaction:",l),this.error="Failed to remove interaction. Please try again."}}}},et={class:"overflow-y-auto max-h-[50vh]"},tt={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},ot={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},st={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},rt={class:"bg-gray-700 divide-y divide-gray-600"},lt={class:"px-4 py-2"},nt={class:"px-4 py-2"},at=["onClick"],dt={class:"mt-4"},it={class:"block mb-2"},bt={disabled:"",value:""},ut=["value"],ct={key:0,class:"text-red-500"};function pt(o,t,l,p,n,b){return u(),c("div",et,[e("table",tt,[e("thead",null,[e("tr",null,[e("th",ot,r(o.$t("interaction")),1),e("th",st,r(o.$t("actions")),1)])]),e("tbody",rt,[(u(!0),c(m,null,g(l.job.interactions||[],(s,h)=>(u(),c("tr",{key:h},[e("td",lt,r(s),1),e("td",nt,[e("button",{onClick:d=>b.removeInteraction(h),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},r(o.$t("remove")),9,at)])]))),128))])]),e("div",dt,[e("label",it,r(o.$t("selectInteraction")),1),a(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.newInteraction=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",bt,r(o.$t("selectInteractionPlaceholder")),1),(u(!0),c(m,null,g(n.availableInteractions,s=>(u(),c("option",{key:s.interaction_name,value:s.interaction_name},r(s.interaction_name),9,ut))),128))],512),[[w,n.newInteraction]]),n.error?(u(),c("span",ct,r(n.error),1)):y("",!0),e("button",{onClick:t[1]||(t[1]=(...s)=>b.addInteraction&&b.addInteraction(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("addInteraction")),1)])])}const ht=x(Qe,[["render",pt]]),mt={props:["job"],data(){return{activeTab:"garage"}},beforeMount(){const o=JSON.parse(this.job.ludaro_manager_garage||"{}");this.job.garage={coords:o.coords||{x:0,y:0,z:0},shop:o.shop||{type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1}};const t=JSON.parse(this.job.ludaro_manager_vehicleShop||"{}");this.job.vehicleShop={coords:t.coords||{x:0,y:0,z:0},type:t.type||"npc",npcModel:t.npcModel||"",npcHeading:t.npcHeading||0,markerId:t.markerId||0,markerColor:t.markerColor||{r:0,g:0,b:0},markerScale:t.markerScale||1,vehicles:t.vehicles||[],buyWithSocietyMoney:t.buyWithSocietyMoney||!1},console.log("Loaded garage data:",JSON.stringify(this.job.garage)),console.log("Loaded vehicle shop data:",JSON.stringify(this.job.vehicleShop))},methods:{fetchCurrentCoords(o){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(t=>t.json()).then(t=>{t&&(o==="garage"?this.job.garage.coords={x:t.x,y:t.y,z:t.z}:this.job.vehicleShop.coords={x:t.x,y:t.y,z:t.z},this.$emit("update-job",this.job))}).catch(t=>{console.error("Failed to fetch current coords:",t)})},fetchCurrentHeading(o){fetch(`https://${GetParentResourceName()}/getCurrentHeading`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(t=>t.json()).then(t=>{t&&(o==="vehicleShop"?this.job.vehicleShop.npcHeading=t:this.job.garage.shop.npcHeading=t,this.$emit("update-job",this.job))}).catch(t=>{console.error("Failed to fetch current heading:",t)})},initializeMarkerColor(o){o==="vehicleShop"?this.job.vehicleShop.markerColor||(this.job.vehicleShop.markerColor={r:0,g:0,b:0}):this.job.garage.shop.markerColor||(this.job.garage.shop.markerColor={r:0,g:0,b:0})},addVehicle(){this.job.vehicleShop.vehicles.push({model:"",label:"",price:0,grade:"",platePrefix:"",societyOwned:!1}),this.$emit("update-job",this.job)},removeVehicle(o){this.job.vehicleShop.vehicles.splice(o,1),this.$emit("update-job",this.job)}}},gt={class:"tabs"},yt={key:0},ft={class:"block mb-2"},wt={class:"mt-4"},xt={class:"block mb-2"},vt={value:"npc"},kt={value:"marker"},_t={key:0},jt={class:"block mb-2"},$t={class:"block mb-2"},Ct={key:1},St={class:"block mb-2"},Ut={class:"block mb-2"},Vt={class:"block mb-2"},Pt={key:1},Mt={class:"block mb-2"},It={class:"mt-4"},Nt={class:"block mb-2"},Jt={value:"npc"},Gt={value:"marker"},zt={key:0},Tt={class:"block mb-2"},Bt={class:"block mb-2"},Ot={key:1},Dt={class:"block mb-2"},Rt={class:"block mb-2"},At={class:"block mb-2"},Ht={class:"mt-4"},Ft={class:"block mb-2"},Et={class:"mt-4"},Lt={class:"text-lg font-bold mb-2"},Wt={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},Kt={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},Xt={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},Yt={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},Zt={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},qt={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},Qt={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},eo={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},to={class:"bg-gray-700 divide-y divide-gray-600"},oo={class:"px-4 py-2"},so=["onUpdate:modelValue"],ro={class:"px-4 py-2"},lo=["onUpdate:modelValue"],no={class:"px-4 py-2"},ao=["onUpdate:modelValue"],io={class:"px-4 py-2"},bo=["onUpdate:modelValue"],uo=["value"],co={class:"px-4 py-2"},po=["onUpdate:modelValue"],ho={class:"px-4 py-2"},mo=["onUpdate:modelValue"],go={class:"px-4 py-2"},yo=["onClick"];function fo(o,t,l,p,n,b){return u(),c("div",null,[e("div",gt,[e("button",{class:_([{"active-tab":n.activeTab==="garage"},"tab-button"]),onClick:t[0]||(t[0]=s=>n.activeTab="garage")},r(o.$t("garage")),3),e("button",{class:_([{"active-tab":n.activeTab==="vehicleShop"},"tab-button"]),onClick:t[1]||(t[1]=s=>n.activeTab="vehicleShop")},r(o.$t("vehicleShop")),3)]),n.activeTab==="garage"?(u(),c("div",yt,[e("div",null,[e("label",ft,r(o.$t("garageCoords"))+" (x, y, z)",1),a(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>l.job.garage.coords.x=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[i,l.job.garage.coords.x]]),a(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=s=>l.job.garage.coords.y=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[i,l.job.garage.coords.y]]),a(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>l.job.garage.coords.z=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[i,l.job.garage.coords.z]]),e("button",{onClick:t[5]||(t[5]=s=>b.fetchCurrentCoords("garage")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),1)]),e("div",wt,[e("label",xt,r(o.$t("garageMarkerNpc")),1),a(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.job.garage.shop.type=s),onChange:t[7]||(t[7]=s=>b.initializeMarkerColor("garage")),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",vt,r(o.$t("npc")),1),e("option",kt,r(o.$t("marker")),1)],544),[[w,l.job.garage.shop.type]]),l.job.garage.shop.type==="npc"?(u(),c("div",_t,[e("label",jt,r(o.$t("npcModel")),1),a(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=s=>l.job.garage.shop.npcModel=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[i,l.job.garage.shop.npcModel]]),e("label",$t,r(o.$t("npcHeading")),1),a(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>l.job.garage.shop.npcHeading=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[i,l.job.garage.shop.npcHeading]]),e("button",{onClick:t[10]||(t[10]=s=>b.fetchCurrentHeading("garage")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentHeading")),1)])):l.job.garage.shop.type==="marker"?(u(),c("div",Ct,[e("label",St,r(o.$t("markerId")),1),a(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=s=>l.job.garage.shop.markerId=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[i,l.job.garage.shop.markerId]]),e("div",null,[e("label",Ut,r(o.$t("markerColor"))+" (RGB)",1),a(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=s=>l.job.garage.shop.markerColor.r=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[i,l.job.garage.shop.markerColor.r]]),a(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=s=>l.job.garage.shop.markerColor.g=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[i,l.job.garage.shop.markerColor.g]]),a(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=s=>l.job.garage.shop.markerColor.b=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[i,l.job.garage.shop.markerColor.b]])]),e("label",Vt,r(o.$t("markerScale")),1),a(e("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=s=>l.job.garage.shop.markerScale=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[i,l.job.garage.shop.markerScale]])])):y("",!0)])])):n.activeTab==="vehicleShop"?(u(),c("div",Pt,[e("div",null,[e("label",Mt,r(o.$t("vehicleShopCoords"))+" (x, y, z)",1),a(e("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>l.job.vehicleShop.coords.x=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[i,l.job.vehicleShop.coords.x]]),a(e("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>l.job.vehicleShop.coords.y=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[i,l.job.vehicleShop.coords.y]]),a(e("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=s=>l.job.vehicleShop.coords.z=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[i,l.job.vehicleShop.coords.z]]),e("button",{onClick:t[19]||(t[19]=s=>b.fetchCurrentCoords("vehicleShop")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),1)]),e("div",It,[e("label",Nt,r(o.$t("vehicleShopMarkerNpc")),1),a(e("select",{"onUpdate:modelValue":t[20]||(t[20]=s=>l.job.vehicleShop.type=s),onChange:t[21]||(t[21]=s=>b.initializeMarkerColor("vehicleShop")),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",Jt,r(o.$t("npc")),1),e("option",Gt,r(o.$t("marker")),1)],544),[[w,l.job.vehicleShop.type]]),l.job.vehicleShop.type==="npc"?(u(),c("div",zt,[e("label",Tt,r(o.$t("npcModel")),1),a(e("input",{type:"text","onUpdate:modelValue":t[22]||(t[22]=s=>l.job.vehicleShop.npcModel=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[i,l.job.vehicleShop.npcModel]]),e("label",Bt,r(o.$t("npcHeading")),1),a(e("input",{type:"number","onUpdate:modelValue":t[23]||(t[23]=s=>l.job.vehicleShop.npcHeading=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[i,l.job.vehicleShop.npcHeading]]),e("button",{onClick:t[24]||(t[24]=s=>b.fetchCurrentHeading("vehicleShop")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentHeading")),1)])):l.job.vehicleShop.type==="marker"?(u(),c("div",Ot,[e("label",Dt,r(o.$t("markerId")),1),a(e("input",{type:"number","onUpdate:modelValue":t[25]||(t[25]=s=>l.job.vehicleShop.markerId=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[i,l.job.vehicleShop.markerId]]),e("div",null,[e("label",Rt,r(o.$t("markerColor"))+" (RGB)",1),a(e("input",{type:"number","onUpdate:modelValue":t[26]||(t[26]=s=>l.job.vehicleShop.markerColor.r=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[i,l.job.vehicleShop.markerColor.r]]),a(e("input",{type:"number","onUpdate:modelValue":t[27]||(t[27]=s=>l.job.vehicleShop.markerColor.g=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[i,l.job.vehicleShop.markerColor.g]]),a(e("input",{type:"number","onUpdate:modelValue":t[28]||(t[28]=s=>l.job.vehicleShop.markerColor.b=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[i,l.job.vehicleShop.markerColor.b]])]),e("label",At,r(o.$t("markerScale")),1),a(e("input",{type:"number","onUpdate:modelValue":t[29]||(t[29]=s=>l.job.vehicleShop.markerScale=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[i,l.job.vehicleShop.markerScale]])])):y("",!0)]),e("div",Ht,[e("label",Ft,r(o.$t("buyWithSocietyMoney")),1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[30]||(t[30]=s=>l.job.vehicleShop.buyWithSocietyMoney=s)},null,512),[[v,l.job.vehicleShop.buyWithSocietyMoney]])]),e("div",Et,[e("h3",Lt,r(o.$t("availableVehicles")),1),e("table",Wt,[e("thead",null,[e("tr",null,[e("th",Kt,r(o.$t("model")),1),e("th",Xt,r(o.$t("label")),1),e("th",Yt,r(o.$t("price")),1),e("th",Zt,r(o.$t("grade")),1),e("th",qt,r(o.$t("platePrefix")),1),e("th",Qt,r(o.$t("societyOwned")),1),e("th",eo,r(o.$t("actions")),1)])]),e("tbody",to,[(u(!0),c(m,null,g(l.job.vehicleShop.vehicles,(s,h)=>(u(),c("tr",{key:h},[e("td",oo,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.model=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Model"},null,8,so),[[i,s.model]])]),e("td",ro,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.label=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Label"},null,8,lo),[[i,s.label]])]),e("td",no,[a(e("input",{type:"number","onUpdate:modelValue":d=>s.price=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Price"},null,8,ao),[[i,s.price]])]),e("td",io,[a(e("select",{"onUpdate:modelValue":d=>s.grade=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[(u(!0),c(m,null,g(l.job.grades,d=>(u(),c("option",{key:d.grade,value:d.grade},r(d.label)+" (ID: "+r(d.grade)+") ",9,uo))),128))],8,bo),[[w,s.grade]])]),e("td",co,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.platePrefix=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Plate Prefix"},null,8,po),[[i,s.platePrefix]])]),e("td",ho,[a(e("input",{type:"checkbox","onUpdate:modelValue":d=>s.societyOwned=d},null,8,mo),[[v,s.societyOwned]])]),e("td",go,[e("button",{onClick:d=>b.removeVehicle(h),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},r(o.$t("remove")),9,yo)])]))),128))])]),e("button",{onClick:t[31]||(t[31]=(...s)=>b.addVehicle&&b.addVehicle(...s)),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},r(o.$t("addVehicle")),1)])])):y("",!0)])}const wo=x(mt,[["render",fo],["__scopeId","data-v-021c6ff4"]]),xo={props:["job"],beforeMount(){try{const o=JSON.parse(this.job.ludaro_manager_onoffduty||"{}");this.job.onoffduty={coords:o.coords||{x:0,y:0,z:0},type:o.type||"npc",npcModel:o.npcModel||"",npcHeading:o.npcHeading||0,npcRange:o.npcRange||0,markerId:o.markerId||0,markerColor:o.markerColor||{r:0,g:0,b:0},markerScale:o.markerScale||1},console.log("Initialized job.onoffduty:",JSON.stringify(this.job.onoffduty))}catch(o){console.error("Error parsing onoffduty data:",o),this.job.onoffduty={coords:{x:0,y:0,z:0},type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1}}},methods:{fetchCurrentCoords(){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(o=>o.json()).then(o=>{o&&(this.job.onoffduty.coords={x:o.x,y:o.y,z:o.z},this.$emit("update-job",this.job),console.log("Updated onoffduty coords:",this.job.onoffduty.coords))}).catch(o=>{console.error("Failed to fetch current coords:",o)})},initializeMarkerColor(){this.job.onoffduty.markerColor||(this.job.onoffduty.markerColor={r:0,g:0,b:0},console.log("Initialized marker color to default:",this.job.onoffduty.markerColor))}},watch:{job:{handler(o){this.$emit("update-job",o)},deep:!0}}},vo={class:"block mb-2"},ko={class:"mb-4"},_o={class:"block mb-2"},jo={value:"npc"},$o={value:"marker"},Co={key:0},So={key:1},Uo={class:"block mb-2"};function Vo(o,t,l,p,n,b){return u(),c("div",null,[e("div",null,[e("label",vo,r(o.$t("onOffDutyCoords"))+" (x, y, z)",1),a(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>l.job.onoffduty.coords.x=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[i,l.job.onoffduty.coords.x]]),a(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>l.job.onoffduty.coords.y=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[i,l.job.onoffduty.coords.y]]),a(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>l.job.onoffduty.coords.z=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[i,l.job.onoffduty.coords.z]]),e("button",{onClick:t[3]||(t[3]=(...s)=>b.fetchCurrentCoords&&b.fetchCurrentCoords(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),1)]),e("div",ko,[e("label",_o,r(o.$t("onOffDutyNpcMarker")),1),a(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.job.onoffduty.type=s),onChange:t[5]||(t[5]=(...s)=>b.initializeMarkerColor&&b.initializeMarkerColor(...s)),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[e("option",jo,r(o.$t("npc")),1),e("option",$o,r(o.$t("marker")),1)],544),[[w,l.job.onoffduty.type]]),l.job.onoffduty.type==="npc"?(u(),c("div",Co,[a(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>l.job.onoffduty.npcModel=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Model"},null,512),[[i,l.job.onoffduty.npcModel]]),a(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>l.job.onoffduty.npcHeading=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Heading"},null,512),[[i,l.job.onoffduty.npcHeading]]),a(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=s=>l.job.onoffduty.npcRange=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"NPC Range"},null,512),[[i,l.job.onoffduty.npcRange]])])):l.job.onoffduty.type==="marker"?(u(),c("div",So,[a(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>l.job.onoffduty.markerId=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker ID"},null,512),[[i,l.job.onoffduty.markerId]]),e("div",null,[e("label",Uo,r(o.$t("markerColor"))+" (RGB)",1),a(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=s=>l.job.onoffduty.markerColor.r=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"R",min:"0",max:"255"},null,512),[[i,l.job.onoffduty.markerColor.r]]),a(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=s=>l.job.onoffduty.markerColor.g=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"G",min:"0",max:"255"},null,512),[[i,l.job.onoffduty.markerColor.g]]),a(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=s=>l.job.onoffduty.markerColor.b=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"B",min:"0",max:"255"},null,512),[[i,l.job.onoffduty.markerColor.b]])]),a(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=s=>l.job.onoffduty.markerScale=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"Marker Scale"},null,512),[[i,l.job.onoffduty.markerScale]])])):y("",!0)])])}const Po=x(xo,[["render",Vo]]),Mo={props:["job"],methods:{getGradeLabel(o){const t=this.job.grades.find(l=>l.grade===o);return t?`${t.label} (ID: ${t.grade})`:"Unknown"},promoteEmployee(o){const t=this.job.employees.find(p=>p.identifier===o),l=this.job.grades.findIndex(p=>p.grade===t.job_grade);l<this.job.grades.length-1&&(t.job_grade=this.job.grades[l+1].grade,this.saveEmployeeData(t))},demoteEmployee(o){const t=this.job.employees.find(p=>p.identifier===o),l=this.job.grades.findIndex(p=>p.grade===t.job_grade);l>0&&(t.job_grade=this.job.grades[l-1].grade,this.saveEmployeeData(t))},fireEmployee(o){const t=this.job.employees.find(l=>l.identifier===o);this.job.employees=this.job.employees.filter(l=>l.identifier!==o),this.$emit("update-job",this.job),fetch(`https://${GetParentResourceName()}/saveEmployee`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,employee:t,fire:!0})})},saveEmployeeData(o){fetch(`https://${GetParentResourceName()}/saveEmployee`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:this.job.name,employee:o})}).then(t=>t.json()).then(t=>{t.success&&this.$emit("update-job",this.job)}).catch(t=>{console.error("Failed to save employee data:",t)})},canPromote(o){const t=this.job.grades.findIndex(l=>l.grade===o.job_grade);return t<this.job.grades.length-1&&this.job.grades[t+1]},canDemote(o){const t=this.job.grades.findIndex(l=>l.grade===o.job_grade);return t>0&&this.job.grades[t-1]}}},Io={class:"overflow-y-auto max-h-[50vh]"},No={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},Jo={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},Go={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},zo={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},To={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},Bo={class:"bg-gray-700 divide-y divide-gray-600"},Oo={class:"px-4 py-2"},Do={class:"px-4 py-2"},Ro={class:"px-4 py-2"},Ao={class:"px-4 py-2"},Ho=["onClick"],Fo=["onClick"],Eo=["onClick"];function Lo(o,t,l,p,n,b){return u(),c("div",Io,[e("table",No,[e("thead",null,[e("tr",null,[e("th",Jo,r(o.$t("firstName")),1),e("th",Go,r(o.$t("lastName")),1),e("th",zo,r(o.$t("grade")),1),e("th",To,r(o.$t("actions")),1)])]),e("tbody",Bo,[(u(!0),c(m,null,g(l.job.employees,(s,h)=>(u(),c("tr",{key:s.identifier},[e("td",Oo,r(s.firstname),1),e("td",Do,r(s.lastname),1),e("td",Ro,r(b.getGradeLabel(s.job_grade)),1),e("td",Ao,[b.canPromote(s)?(u(),c("button",{key:0,onClick:d=>b.promoteEmployee(s.identifier),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},r(o.$t("promote")),9,Ho)):y("",!0),b.canDemote(s)?(u(),c("button",{key:1,onClick:d=>b.demoteEmployee(s.identifier),class:"bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600"},r(o.$t("demote")),9,Fo)):y("",!0),l.job.name!=="unemployed"?(u(),c("button",{key:2,onClick:d=>b.fireEmployee(s.identifier),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},r(o.$t("fire")),9,Eo)):y("",!0)])]))),128))])])])}const Wo=x(Mo,[["render",Lo],["__scopeId","data-v-81a8b0d9"]]),Ko={},Xo={class:"under-construction"},Yo={class:"message"},Zo={class:"text"},qo=e("br",null,null,-1),Qo={class:"text"};function es(o,t){return u(),c("div",Xo,[e("div",Yo,[e("span",Zo,"🚧 "+r(o.$t("underConstruction"))+" 👷‍♀️🚧",1),qo,e("span",Qo,r(o.$t("siteNotAvailable")),1)])])}const ts=x(Ko,[["render",es]]),os={props:["job"],data(){return{showAddShopPopup:!1,newShop:{coords:{x:0,y:0,z:0},name:"",items:[]}}},beforeMount(){this.job.shops=JSON.parse(this.job.ludaro_manager_shops||"[]"),this.job.shops||(this.job.shops=[]),this.job.shops=this.job.shops.map(o=>({coords:o.coords||{x:0,y:0,z:0},name:o.name||"",items:o.items?o.items.map(t=>({name:t.name||"",price:t.price||0,stock:t.stock||0,minimumGrade:t.minimumGrade||""})):[]})),console.log("Loaded job data:",JSON.stringify(this.job.shops))},methods:{fetchCurrentCoords(o=null,t=!1){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(l=>l.json()).then(l=>{l&&(t?this.newShop.coords={x:l.x,y:l.y,z:l.z}:this.job.shops[o].coords={x:l.x,y:l.y,z:l.z},console.log("Updated coords:",l),this.$emit("update-job",this.job))}).catch(l=>{console.error("Failed to fetch current coords:",l)})},addItem(o){this.job.shops[o].items||(this.job.shops[o].items=[]),this.job.shops[o].items.push({name:"",price:0,stock:0,minimumGrade:""}),console.log("Added new item to shop:",o,this.job.shops[o].items),this.$emit("update-job",this.job)},removeItem(o,t){this.job.shops[o].items.splice(t,1),console.log("Removed item from shop:",o,this.job.shops[o].items),this.$emit("update-job",this.job)},addNewItem(){this.newShop.items.push({name:"",price:0,stock:0,minimumGrade:""}),console.log("Added new item to new shop:",this.newShop.items)},removeNewItem(o){this.newShop.items.splice(o,1),console.log("Removed item from new shop:",o,this.newShop.items)},addNewShop(){Array.isArray(this.job.shops)||(this.job.shops=[]),this.job.shops.push({...this.newShop}),console.log("Added new shop:",this.newShop),this.showAddShopPopup=!1,this.newShop={coords:{x:0,y:0,z:0},name:"",items:[]},this.$emit("update-job",this.job)},removeShop(o){this.job.shops.splice(o,1),console.log("Removed shop:",o,this.job.shops),this.$emit("update-job",this.job)}}},ss={class:"overflow-y-auto max-h-[50vh]"},rs={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},ls={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},ns={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},as={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},ds={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},is={class:"bg-gray-700 divide-y divide-gray-600"},bs={class:"px-4 py-2"},us=["onUpdate:modelValue"],cs=["onUpdate:modelValue"],ps=["onUpdate:modelValue"],hs=["onClick"],ms={class:"px-4 py-2"},gs=["onUpdate:modelValue"],ys={class:"px-4 py-2"},fs=["onUpdate:modelValue"],ws={class:"flex space-x-2"},xs={class:"w-1/3"},vs={class:"block mb-2"},ks=["onUpdate:modelValue"],_s={class:"w-1/3"},js={class:"block mb-2"},$s=["onUpdate:modelValue"],Cs={class:"w-1/3"},Ss={class:"block mb-2"},Us=["onUpdate:modelValue"],Vs=["value"],Ps=["onClick"],Ms=["onClick"],Is={class:"px-4 py-2"},Ns=["onClick"],Js={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},Gs={class:"bg-gray-800 text-white p-4 rounded w-1/2 overflow-auto max-h-[90vh]"},zs={class:"text-lg font-bold mb-4"},Ts={class:"mb-4"},Bs={class:"block mb-2"},Os={class:"mb-4"},Ds={class:"block mb-2"},Rs={class:"mb-4"},As={class:"block mb-2"},Hs=["onUpdate:modelValue"],Fs={class:"flex space-x-2"},Es={class:"w-1/3"},Ls={class:"block mb-2"},Ws=["onUpdate:modelValue"],Ks={class:"w-1/3"},Xs={class:"block mb-2"},Ys=["onUpdate:modelValue"],Zs={class:"w-1/3"},qs={class:"block mb-2"},Qs=["onUpdate:modelValue"],er=["value"],tr=["onClick"],or={class:"mt-4"};function sr(o,t,l,p,n,b){return u(),c("div",ss,[e("table",rs,[e("thead",null,[e("tr",null,[e("th",ls,r(o.$t("coords")),1),e("th",ns,r(o.$t("name")),1),e("th",as,r(o.$t("items")),1),e("th",ds,r(o.$t("actions")),1)])]),e("tbody",is,[(u(!0),c(m,null,g(l.job.shops,(s,h)=>(u(),c("tr",{key:h},[e("td",bs,[a(e("input",{type:"number","onUpdate:modelValue":d=>s.coords.x=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,8,us),[[i,s.coords.x]]),a(e("input",{type:"number","onUpdate:modelValue":d=>s.coords.y=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,8,cs),[[i,s.coords.y]]),a(e("input",{type:"number","onUpdate:modelValue":d=>s.coords.z=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,8,ps),[[i,s.coords.z]]),e("button",{onClick:d=>b.fetchCurrentCoords(h),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),9,hs)]),e("td",ms,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.name=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('shopName') }}"},null,8,gs),[[i,s.name]])]),e("td",ys,[(u(!0),c(m,null,g(s.items,(d,j)=>(u(),c("div",{key:j,class:"mb-4"},[a(e("input",{type:"text","onUpdate:modelValue":f=>d.name=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('itemName') }}"},null,8,fs),[[i,d.name]]),e("div",ws,[e("div",xs,[e("label",vs,r(o.$t("price")),1),a(e("input",{type:"number","onUpdate:modelValue":f=>d.price=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('price') }}"},null,8,ks),[[i,d.price]])]),e("div",_s,[e("label",js,r(o.$t("stock")),1),a(e("input",{type:"number","onUpdate:modelValue":f=>d.stock=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('stock') }}"},null,8,$s),[[i,d.stock]])]),e("div",Cs,[e("label",Ss,r(o.$t("grade")),1),a(e("select",{"onUpdate:modelValue":f=>d.minimumGrade=f,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[(u(!0),c(m,null,g(l.job.grades,f=>(u(),c("option",{key:f.grade,value:f.grade},r(f.label)+" (ID: "+r(f.grade)+") ",9,Vs))),128))],8,Us),[[w,d.minimumGrade]])])]),e("button",{onClick:f=>b.removeItem(h,j),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},r(o.$t("removeItem")),9,Ps)]))),128)),e("button",{onClick:d=>b.addItem(h),class:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600"},r(o.$t("addItem")),9,Ms)]),e("td",Is,[e("button",{onClick:d=>b.removeShop(h),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},r(o.$t("removeShop")),9,Ns)])]))),128))])]),e("button",{onClick:t[0]||(t[0]=s=>n.showAddShopPopup=!0),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},r(o.$t("addShop")),1),n.showAddShopPopup?(u(),c("div",Js,[e("div",Gs,[e("h3",zs,r(o.$t("addNewShop")),1),e("div",Ts,[e("label",Bs,r(o.$t("coords")),1),a(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>n.newShop.coords.x=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[i,n.newShop.coords.x]]),a(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>n.newShop.coords.y=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[i,n.newShop.coords.y]]),a(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=s=>n.newShop.coords.z=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[i,n.newShop.coords.z]]),e("button",{onClick:t[4]||(t[4]=s=>b.fetchCurrentCoords(null,!0)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),1)]),e("div",Os,[e("label",Ds,r(o.$t("name")),1),a(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>n.newShop.name=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('shopName') }}"},null,512),[[i,n.newShop.name]])]),e("div",Rs,[e("label",As,r(o.$t("items")),1),(u(!0),c(m,null,g(n.newShop.items,(s,h)=>(u(),c("div",{key:h,class:"mb-4"},[a(e("input",{type:"text","onUpdate:modelValue":d=>s.name=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('itemName') }}"},null,8,Hs),[[i,s.name]]),e("div",Fs,[e("div",Es,[e("label",Ls,r(o.$t("price")),1),a(e("input",{type:"number","onUpdate:modelValue":d=>s.price=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('price') }}"},null,8,Ws),[[i,s.price]])]),e("div",Ks,[e("label",Xs,r(o.$t("stock")),1),a(e("input",{type:"number","onUpdate:modelValue":d=>s.stock=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"{{ $t('stock') }}"},null,8,Ys),[[i,s.stock]])]),e("div",Zs,[e("label",qs,r(o.$t("grade")),1),a(e("select",{"onUpdate:modelValue":d=>s.minimumGrade=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},[(u(!0),c(m,null,g(l.job.grades,d=>(u(),c("option",{key:d.grade,value:d.grade},r(d.label)+" (ID: "+r(d.grade)+") ",9,er))),128))],8,Qs),[[w,s.minimumGrade]])])]),e("button",{onClick:d=>b.removeNewItem(h),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},r(o.$t("removeItem")),9,tr)]))),128)),e("button",{onClick:t[6]||(t[6]=(...s)=>b.addNewItem&&b.addNewItem(...s)),class:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600"},r(o.$t("addItem")),1)]),e("div",or,[e("button",{onClick:t[7]||(t[7]=(...s)=>b.addNewShop&&b.addNewShop(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},r(o.$t("addShop")),1),e("button",{onClick:t[8]||(t[8]=s=>n.showAddShopPopup=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},r(o.$t("cancel")),1)])])])):y("",!0)])}const rr=x(os,[["render",sr]]),lr={props:["job"],data(){return{showAddProcessingPopup:!1,newProcessing:{inputItems:"",outputItem:"",seconds:0,animationDir:"",animation:"",minimumGrade:"",coords:{x:null,y:null,z:null}}}},methods:{fetchCurrentCoords(o=null,t=!1){fetch(`https://${GetParentResourceName()}/getCurrentCoords`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})}).then(l=>l.json()).then(l=>{if(l){const p={x:l.x||0,y:l.y||0,z:l.z||0};t?this.newProcessing.coords=p:this.job.ludaro_manager_processing[o]&&(this.job.ludaro_manager_processing[o].coords=p),this.$emit("update-job",this.job)}}).catch(l=>{console.error("Failed to fetch current coords:",l)})},addNewProcessing(){Array.isArray(this.job.ludaro_manager_processing)||(this.job.ludaro_manager_processing=[]),this.job.ludaro_manager_processing.push({...this.newProcessing}),this.showAddProcessingPopup=!1,this.newProcessing={inputItems:"",outputItem:"",seconds:0,animationDir:"",animation:"",minimumGrade:"",coords:{x:null,y:null,z:null}},this.$emit("update-job",this.job)},removeProcessing(o){this.job.ludaro_manager_processing&&this.job.ludaro_manager_processing[o]&&(this.job.ludaro_manager_processing.splice(o,1),this.$emit("update-job",this.job))}}},nr={class:"overflow-y-auto max-h-[50vh]"},ar={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},dr={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},ir={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},br={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},ur={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},cr={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},pr={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},hr={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},mr={class:"px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},gr={class:"bg-gray-700 divide-y divide-gray-600"},yr={class:"px-4 py-2"},fr=["onUpdate:modelValue"],wr={class:"px-4 py-2"},xr=["onUpdate:modelValue"],vr={class:"px-4 py-2"},kr=["onUpdate:modelValue"],_r={class:"px-4 py-2"},jr=["onUpdate:modelValue"],$r={class:"px-4 py-2"},Cr=["onUpdate:modelValue"],Sr={class:"px-4 py-2"},Ur=["onUpdate:modelValue"],Vr=["value"],Pr={class:"px-4 py-2"},Mr=["onUpdate:modelValue"],Ir=["onUpdate:modelValue"],Nr=["onUpdate:modelValue"],Jr=["onClick"],Gr={class:"px-4 py-2"},zr=["onClick"],Tr={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75"},Br={class:"bg-gray-800 text-white p-4 rounded w-1/2 overflow-auto max-h-[90vh]"},Or={class:"text-lg font-bold mb-4"},Dr={class:"mb-4"},Rr={class:"block mb-2"},Ar={class:"mb-4"},Hr={class:"block mb-2"},Fr={class:"mb-4"},Er={class:"block mb-2"},Lr={class:"mb-4"},Wr={class:"block mb-2"},Kr={class:"mb-4"},Xr={class:"block mb-2"},Yr={class:"mb-4"},Zr={class:"block mb-2"},qr=["value"],Qr={class:"mb-4"},el={class:"block mb-2"},tl={class:"mt-4"};function ol(o,t,l,p,n,b){return u(),c("div",nr,[e("table",ar,[e("thead",null,[e("tr",null,[e("th",dr,r(o.$t("inputItems")),1),e("th",ir,r(o.$t("outputItem")),1),e("th",br,r(o.$t("seconds")),1),e("th",ur,r(o.$t("animationDir")),1),e("th",cr,r(o.$t("animation")),1),e("th",pr,r(o.$t("minGrade")),1),e("th",hr,r(o.$t("coords")),1),e("th",mr,r(o.$t("actions")),1)])]),e("tbody",gr,[(u(!0),c(m,null,g(l.job.ludaro_manager_processing,(s,h)=>(u(),c("tr",{key:h},[e("td",yr,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.inputItems=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,fr),[[i,s.inputItems]])]),e("td",wr,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.outputItem=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,xr),[[i,s.outputItem]])]),e("td",vr,[a(e("input",{type:"number","onUpdate:modelValue":d=>s.seconds=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,kr),[[i,s.seconds]])]),e("td",_r,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.animationDir=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,jr),[[i,s.animationDir]])]),e("td",$r,[a(e("input",{type:"text","onUpdate:modelValue":d=>s.animation=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,8,Cr),[[i,s.animation]])]),e("td",Sr,[a(e("select",{"onUpdate:modelValue":d=>s.minimumGrade=d,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},[(u(!0),c(m,null,g(l.job.grades,d=>(u(),c("option",{key:d.grade,value:d.grade},r(d.label)+" (ID: "+r(d.grade)+") ",9,Vr))),128))],8,Ur),[[w,s.minimumGrade]])]),e("td",Pr,[a(e("input",{type:"number","onUpdate:modelValue":d=>s.coords.x=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,8,Mr),[[i,s.coords.x]]),a(e("input",{type:"number","onUpdate:modelValue":d=>s.coords.y=d,class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,8,Ir),[[i,s.coords.y]]),a(e("input",{type:"number","onUpdate:modelValue":d=>s.coords.z=d,class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,8,Nr),[[i,s.coords.z]]),e("button",{onClick:d=>b.fetchCurrentCoords(h),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),9,Jr)]),e("td",Gr,[e("button",{onClick:d=>b.removeProcessing(h),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},r(o.$t("remove")),9,zr)])]))),128))])]),e("button",{onClick:t[0]||(t[0]=s=>n.showAddProcessingPopup=!0),class:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"},r(o.$t("addProcessing")),1),n.showAddProcessingPopup?(u(),c("div",Tr,[e("div",Br,[e("h3",Or,r(o.$t("addNewProcessing")),1),e("div",Dr,[e("label",Rr,r(o.$t("inputItems")),1),a(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>n.newProcessing.inputItems=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newProcessing.inputItems]])]),e("div",Ar,[e("label",Hr,r(o.$t("outputItem")),1),a(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>n.newProcessing.outputItem=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newProcessing.outputItem]])]),e("div",Fr,[e("label",Er,r(o.$t("seconds")),1),a(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=s=>n.newProcessing.seconds=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newProcessing.seconds]])]),e("div",Lr,[e("label",Wr,r(o.$t("animationDir")),1),a(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>n.newProcessing.animationDir=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newProcessing.animationDir]])]),e("div",Kr,[e("label",Xr,r(o.$t("animation")),1),a(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>n.newProcessing.animation=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newProcessing.animation]])]),e("div",Yr,[e("label",Zr,r(o.$t("minGrade")),1),a(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>n.newProcessing.minimumGrade=s),class:"w-full p-2 border border-gray-300 rounded bg-gray-700 text-white"},[(u(!0),c(m,null,g(l.job.grades,s=>(u(),c("option",{key:s.grade,value:s.grade},r(s.label)+" (ID: "+r(s.grade)+") ",9,qr))),128))],512),[[w,n.newProcessing.minimumGrade]])]),e("div",Qr,[e("label",el,r(o.$t("coords")),1),a(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>n.newProcessing.coords.x=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"x"},null,512),[[i,n.newProcessing.coords.x]]),a(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=s=>n.newProcessing.coords.y=s),class:"w-full p-2 mb-2 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"y"},null,512),[[i,n.newProcessing.coords.y]]),a(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>n.newProcessing.coords.z=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white",placeholder:"z"},null,512),[[i,n.newProcessing.coords.z]]),e("button",{onClick:t[10]||(t[10]=s=>b.fetchCurrentCoords(null,!0)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2"},r(o.$t("useCurrentCoords")),1)]),e("div",tl,[e("button",{onClick:t[11]||(t[11]=(...s)=>b.addNewProcessing&&b.addNewProcessing(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},r(o.$t("addProcessing")),1),e("button",{onClick:t[12]||(t[12]=s=>n.showAddProcessingPopup=!1),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},r(o.$t("cancel")),1)])])])):y("",!0)])}const sl=x(lr,[["render",ol]]),rl={data(){return{loading:!0,loadingData:!1,jobs:{},interactions:[],editingJobName:null,isPopupVisible:!1,activeTab:"jobInfo",showAddJobPopup:!1,lastSaveTime:0,newJob:{name:"",label:"",whitelisted:!1,societypaid:!1,grades:[],vehicles:[],bossmenu:{coords:{x:null,y:null,z:null},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1},onOffDutyCoords:{x:null,y:null,z:null},garageCoords:{x:null,y:null,z:null},stashes:[],shops:[],processing:[],vehicleShop:{coords:{x:null,y:null,z:null},type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,vehicles:[]}},newGrade:{grade:"",name:"",label:"",salary:0},newInteraction:"",newVehicle:{name:"",price:0,paidBy:"society",grade:""},jobToDelete:null,tabs:["jobInfo","Grades","BossMenu","Interactions","Garage","onOffDuty","employees","stashes","shops","processing"],error:""}},mounted(){this.fetchJobsAndInteractions(),document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown)},computed:{activeTabComponent(){return{jobInfo:N,Grades:be,BossMenu:qe,Interactions:ht,Garage:wo,onOffDuty:Po,employees:Wo,stashes:ts,shops:rr,processing:sl}[this.activeTab]||"div"}},methods:{async fetchJobsAndInteractions(){try{this.loading=!0;const t=await(await fetch(`https://${GetParentResourceName()}/getJobData`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})})).json(),p=await(await fetch(`https://${GetParentResourceName()}/getInteractions`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({})})).json();Object.keys(t).forEach(n=>{t[n].grades||(t[n].grades=[]),(!t[n].interactions||t[n].interactions.length===0)&&(t[n].interactions=[]),t[n].vehicles||(t[n].vehicles=[]),t[n].bossmenu||(t[n].bossmenu={coords:{x:null,y:null,z:null},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1}),t[n].employees||(t[n].employees=[]),t[n].vehicleShop||(t[n].vehicleShop={coords:{x:null,y:null,z:null},type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,vehicles:[]}),typeof t[n].societypaid>"u"&&(t[n].societypaid=!1)}),this.jobs=t,this.interactions=p.filter(n=>n!=="[]"),this.loading=!1}catch(o){console.error("Failed to fetch job or interaction data:",o),this.loading=!1}},editJob(o){this.editingJobName=o,this.activeTab="jobInfo",this.isPopupVisible=!0},saveJob(o){this.jobs[o],fetch(`https://${GetParentResourceName()}/saveJob`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(this.jobs[o])}).then(t=>t.json()).then(t=>{t.success&&(this.isPopupVisible=!1,this.editingJobName=null,this.refreshData())}).catch(t=>{console.error("Failed to save job:",t)})},closePopup(){this.isPopupVisible=!1,this.showAddJobPopup=!1,this.jobToDelete=null},handleKeydown(o){o.key==="Escape"&&this.closePopup()},confirmDeleteJob(o){this.jobToDelete=o},deleteJob(o){const t=this.jobs[o];fetch(`https://${GetParentResourceName()}/deleteJob`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({jobName:t.name})}).then(l=>l.json()).then(l=>{if(l.success){const p={...this.jobs};delete p[o],this.jobs=p,this.jobToDelete=null}}).catch(l=>{console.error("Failed to delete job:",l)})},openAddJobPopup(){this.showAddJobPopup=!0},addNewJob(){if(Object.values(this.jobs).some(t=>t.name===this.newJob.name||t.label===this.newJob.label)){this.error="A job with the same name or label already exists. Please use a different name or label.";return}fetch(`https://${GetParentResourceName()}/addJob`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(this.newJob)}).then(t=>t.json()).then(t=>{t.success?(this.jobs={...this.jobs,[t.jobName]:this.newJob},this.showAddJobPopup=!1,this.newJob={name:"",label:"",whitelisted:!1,societypaid:!1,grades:[],vehicles:[],bossmenu:{coords:{x:null,y:null,z:null},grade:"",type:"npc",npcModel:"",npcHeading:0,npcRange:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1},onOffDutyCoords:{x:null,y:null,z:null},garageCoords:{x:null,y:null,z:null},stashes:[],shops:[],processing:[],vehicleShop:{coords:{x:null,y:null,z:null},type:"npc",npcModel:"",npcHeading:0,markerId:0,markerColor:{r:0,g:0,b:0},markerScale:1,vehicles:[]}},this.refreshData()):this.error="Failed to add new job. Please try again."}).catch(t=>{console.error("Failed to add new job:",t),this.error="Failed to add new job. Please try again."})},refreshData(){this.loadingData=!0,this.fetchJobsAndInteractions().then(()=>{this.loadingData=!1})},updateJob(o){this.jobs[this.editingJobName]=o}}},ll={key:0,class:"flex justify-center items-center h-screen"},nl={class:"text-2xl text-white"},al={key:1,class:"container mx-auto p-4 overflow-auto max-h-[90vh]"},dl={class:"overflow-x-auto"},il={class:"min-w-full divide-y divide-gray-200 bg-gray-800 text-white"},bl={class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},ul={class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},cl={class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},pl={class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},hl={class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},ml={class:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},gl={class:"bg-gray-700 divide-y divide-gray-600"},yl=["onClick"],fl={class:"px-6 py-4 whitespace-nowrap"},wl={class:"px-6 py-4 whitespace-nowrap"},xl={class:"px-6 py-4 whitespace-nowrap"},vl={class:"px-6 py-4 whitespace-nowrap"},kl={class:"px-6 py-4 whitespace-nowrap"},_l={class:"px-6 py-4 whitespace-nowrap"},jl=["onClick"],$l={class:"bg-gray-800 text-white p-4 rounded w-3/4 overflow-auto max-h-[90vh]"},Cl={class:"text-lg font-bold mb-4"},Sl={class:"mb-4"},Ul={class:"block mb-2"},Vl={class:"mb-4"},Pl={class:"block mb-2"},Ml={class:"mb-4"},Il={class:"block mb-2"},Nl={class:"mb-4"},Jl={class:"block mb-2"},Gl={class:"mb-4"},zl={class:"flex mb-4 border-b border-gray-600"},Tl=["onClick"],Bl={class:"mt-4"},Ol={class:"bg-gray-800 text-white p-4 rounded w-1/2"},Dl={class:"text-lg font-bold mb-4"},Rl={class:"mb-4"},Al={class:"block mb-2"},Hl={class:"mb-4"},Fl={class:"block mb-2"},El={class:"mb-4"},Ll={class:"block mb-2"},Wl={class:"mb-4"},Kl={class:"block mb-2"},Xl={class:"mt-4"},Yl={key:0,class:"mt-4 text-red-500"},Zl={class:"bg-gray-800 text-white p-4 rounded w-1/2"},ql={class:"text-lg font-bold mb-4"},Ql={class:"mt-4"};function en(o,t,l,p,n,b){return u(),c("div",null,[n.loading?(u(),c("div",ll,[e("span",nl,r(o.$t("loading")),1)])):(u(),c("div",al,[e("div",dl,[e("table",il,[e("thead",null,[e("tr",null,[e("th",bl,r(o.$t("jobName")),1),e("th",ul,r(o.$t("jobLabel")),1),e("th",cl,r(o.$t("whitelisted")),1),e("th",pl,r(o.$t("activePlayers")),1),e("th",hl,r(o.$t("societyPaid")),1),e("th",ml,r(o.$t("actions")),1)])]),e("tbody",gl,[(u(!0),c(m,null,g(n.jobs,(s,h)=>(u(),c("tr",{key:h,onClick:d=>b.editJob(h),class:"hover:bg-gray-600 cursor-pointer"},[e("td",fl,r(s.name),1),e("td",wl,r(s.label),1),e("td",xl,r(s.whitelisted?"✔️":"❌"),1),e("td",vl,r(s.activeplayers),1),e("td",kl,r(s.societypaid?"✔️":"❌"),1),e("td",_l,[e("button",{onClick:k(d=>b.confirmDeleteJob(h),["stop"]),class:"text-red-500 hover:text-red-700"},"🗑️",8,jl)])],8,yl))),128))])])]),e("button",{class:"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",onClick:t[0]||(t[0]=(...s)=>b.openAddJobPopup&&b.openAddJobPopup(...s))},r(o.$t("addNewJob")),1)])),n.isPopupVisible?(u(),c("div",{key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",onClick:t[7]||(t[7]=k((...s)=>b.closePopup&&b.closePopup(...s),["self"]))},[e("div",$l,[e("h3",Cl,r(o.$t("editJob")),1),e("div",Sl,[e("label",Ul,r(o.$t("jobName")),1),a(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>n.jobs[n.editingJobName].name=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.jobs[n.editingJobName].name]])]),e("div",Vl,[e("label",Pl,r(o.$t("jobLabel")),1),a(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>n.jobs[n.editingJobName].label=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.jobs[n.editingJobName].label]])]),e("div",Ml,[e("label",Il,r(o.$t("whitelisted")),1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>n.jobs[n.editingJobName].whitelisted=s)},null,512),[[v,n.jobs[n.editingJobName].whitelisted]])]),e("div",Nl,[e("label",Jl,r(o.$t("societyPaid")),1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>n.jobs[n.editingJobName].societypaid=s)},null,512),[[v,n.jobs[n.editingJobName].societypaid]])]),e("div",Gl,[e("nav",zl,[(u(!0),c(m,null,g(n.tabs,s=>(u(),c("a",{key:s,onClick:h=>n.activeTab=s,class:_(["cursor-pointer p-2 rounded-t-lg text-white",n.activeTab===s?"bg-blue-600":""])},r(o.$t(s)),11,Tl))),128))]),(u(),$(C(b.activeTabComponent),{job:n.jobs[n.editingJobName],onUpdateJob:b.updateJob},null,40,["job","onUpdateJob"]))]),e("div",Bl,[e("button",{onClick:t[5]||(t[5]=s=>b.saveJob(n.editingJobName)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},r(o.$t("save")),1),e("button",{onClick:t[6]||(t[6]=(...s)=>b.closePopup&&b.closePopup(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},r(o.$t("cancel")),1)])])])):y("",!0),n.showAddJobPopup?(u(),c("div",{key:3,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",onClick:t[14]||(t[14]=k((...s)=>b.closePopup&&b.closePopup(...s),["self"]))},[e("div",Ol,[e("h3",Dl,r(o.$t("addNewJob")),1),e("div",Rl,[e("label",Al,r(o.$t("jobName")),1),a(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=s=>n.newJob.name=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newJob.name]])]),e("div",Hl,[e("label",Fl,r(o.$t("jobLabel")),1),a(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=s=>n.newJob.label=s),class:"w-full p-2 mb-4 border border-gray-300 rounded bg-gray-700 text-white"},null,512),[[i,n.newJob.label]])]),e("div",El,[e("label",Ll,r(o.$t("whitelisted")),1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>n.newJob.whitelisted=s)},null,512),[[v,n.newJob.whitelisted]])]),e("div",Wl,[e("label",Kl,r(o.$t("societyPaid")),1),a(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=s=>n.newJob.societypaid=s)},null,512),[[v,n.newJob.societypaid]])]),e("div",Xl,[e("button",{onClick:t[12]||(t[12]=(...s)=>b.addNewJob&&b.addNewJob(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},r(o.$t("addJob")),1),e("button",{onClick:t[13]||(t[13]=(...s)=>b.closePopup&&b.closePopup(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},r(o.$t("cancel")),1)]),n.error?(u(),c("div",Yl,r(n.error),1)):y("",!0)])])):y("",!0),n.jobToDelete!==null?(u(),c("div",{key:4,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",onClick:t[17]||(t[17]=k((...s)=>b.closePopup&&b.closePopup(...s),["self"]))},[e("div",Zl,[e("h3",ql,r(o.$t("confirmDeleteJob")),1),e("p",null,r(o.$t("confirmDeleteMessage")),1),e("div",Ql,[e("button",{onClick:t[15]||(t[15]=s=>b.deleteJob(n.jobToDelete)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"},r(o.$t("yes")),1),e("button",{onClick:t[16]||(t[16]=(...s)=>b.closePopup&&b.closePopup(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2"},r(o.$t("no")),1)])])])):y("",!0)])}const on=x(rl,[["render",en],["__scopeId","data-v-1afbc137"]]);export{on as default};
