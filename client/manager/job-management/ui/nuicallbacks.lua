RegisterNUICallback('getJobData', function(data, cb)
    Debug(4, "Fetching job data")
    local jobs = getJobs()
    Debug(3, "Job data fetched: " .. ESX.DumpTable(jobs))
    cb(jobs)
end)

RegisterNUICallback('getInteractions', function(data, cb)
    Debug(4, "Fetching interactions")
    local interactions = getInteractions()
    Debug(3, "Interactions fetched: " .. ESX.DumpTable(interactions))
    cb(interactions)
end)

RegisterNUICallback('saveJob', function(data, cb)
    Debug(4, "Saving job data: " .. ESX.DumpTable(data))
    local success = saveJob(data)
    Debug(2, "Job save status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('deleteJob', function(data, cb)
    Debug(4, "Deleting job: " .. data.jobName)
    local success = deleteJob(data.jobName)
    Debug(2, "Job delete status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('addJob', function(data, cb)
    Debug(4, "Adding job: " .. ESX.DumpTable(data))
    local success = addJob(data)
    Debug(2, "Job add status: " .. tostring(success))
    cb({ success = success, jobName = data.name })
end)

RegisterNUICallback('addGrade', function(data, cb)
    Debug(4, "Adding grade to job: " .. data.jobName)
    local success = addGrade(data.jobName, data.grade)
    Debug(2, "Grade add status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('removeGrade', function(data, cb)
    Debug(4, "Removing grade from job: " .. data.jobName)
    local success = deleteGrade(data.jobName, data.index)
    Debug(2, "Grade remove status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('addInteraction', function(data, cb)
    Debug(4, "Adding interaction to job: " .. data.jobName)
    local success = addInteraction(data.jobName, data.interaction)
    Debug(2, "Interaction add status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('removeInteraction', function(data, cb)
    Debug(4, "Removing interaction from job: " .. data.jobName)
    local success = deleteInteraction(data.jobName, data.interaction)
    Debug(2, "Interaction remove status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('addVehicle', function(data, cb)
    Debug(4, "Adding vehicle to job: " .. data.jobName)
    local success = addVehicle(data.jobName, data.vehicle)
    Debug(2, "Vehicle add status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('removeVehicle', function(data, cb)
    Debug(4, "Removing vehicle from job: " .. data.jobName)
    local success = deleteVehicle(data.jobName, data.index)
    Debug(2, "Vehicle remove status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('getCurrentCoords', function(data, cb)
    Debug(4, "Fetching current coords")
    local coords = { x = math.round(GetEntityCoords(PlayerPedId()).x), y = math.round(GetEntityCoords(PlayerPedId()).y), z = math.round(GetEntityCoords(PlayerPedId()).z) }
    Debug(3, "Current coords: " .. ESX.DumpTable(coords))
    cb(coords)
end)

RegisterNUICallback('saveArmory', function(data, cb)
    Debug(4, "Saving armory for job: " .. data.jobName)
    local success = saveArmory(data.jobName, data.armory)
    Debug(2, "Armory save status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('saveClothing', function(data, cb)
    Debug(4, "Saving clothing for job: " .. data.jobName)
    local success = saveClothing(data.jobName, data.clothing)
    Debug(2, "Clothing save status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('saveStashes', function(data, cb)
    Debug(4, "Saving stashes for job: " .. data.jobName)
    local success = saveStashes(data.jobName, data.stashes)
    Debug(2, "Stashes save status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('saveShop', function(data, cb)
    Debug(4, "Saving shop for job: " .. data.jobName)
    local success = saveShop(data.jobName, data.shop)
    Debug(2, "Shop save status: " .. tostring(success))
    cb({ success = success })
end)

RegisterNUICallback('refreshJobsAndGrades', function(data, cb)
    local jobs = getJobs()
    local grades = getAllGrades()
    cb({ jobs = jobs, grades = grades })
end)

RegisterNUICallback('saveGrades', function(data, cb)
    print("wwhat?" )
    local success = saveGrades(data.jobName, data.grades)
    cb({ success = success })
end)

RegisterNUICallback('getCurrentHeading', function(data, cb)
    local ped = PlayerPedId()
    local heading = GetEntityHeading(ped)
    cb({ heading = heading })
end)

RegisterNUICallback('saveBossMenu', function(data, cb)
    local success = saveBossMenu(data)
    cb({ success = success })
end)

RegisterNUICallback("saveEmployee", function(data, cb)
    print(ESX.DumpTable(data))
    local success = saveEmployee(data)
    cb({ success = success })
end)